----------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  psweight_example_ado
       log:  C:\Users\kkranker\Documents\Stata\psweight\code-psweight\psweight_example_ado.log
  log type:  text
 opened on:   5 Nov 2019, 22:29:40
. 
. di as txt "Current user: `c(username)'" _n "Environment: `c(os)' `c(machine_type)' `: environment computername'" _n "Stata: `c(stata_version)'" cond(c(stata_v
> ersion)==c(version),""," (set to version `c(version)')") _n "Date: " c(current_date) " " c(current_time)
Current user: KKranker
Environment: Windows PC (64-bit x86-64) KKRANKER
Stata: 16
Date:  5 Nov 2019 22:29:40
. desc, short

Contains data from C:\Users\kkranker\Documents\Stata\Multiple-Equation-Models\simple_cattaneo_data.dta
  obs:         4,642                          Cattaneo (2010) study on the effect of maternal smoking on birth weight
 vars:            20                          8 Apr 2015 05:07
Sorted by: 
     Note: Dataset has changed since last saved.
. local varlist : copy local varlist_orig
. summ `treatvar' `varlist' `tousevar' `wgtvar' `depvarlist'

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
       treat |      4,642    .1861267    .3892508          0          1
          x1 |      4,642    .6996984    .4584385          0          1
             |
          x2 |
          0  |      4,642    .9659629    .1813439          0          1
          1  |      4,642    .0340371    .1813439          0          1
             |
          x3 |
          0  |      4,642    .9465748    .2249042          0          1
-------------+---------------------------------------------------------
          1  |      4,642    .0534252    .2249042          0          1
             |
          x4 |      4,642    .4379578    .4961893          0          1
          x5 |      4,642    26.50452    5.619026         13         45
          x6 |      4,642    12.68957    2.520661          0         17
          x7 |      4,642    6.540069    3.359167          1         12
-------------+---------------------------------------------------------
         x90 |      4,642   -.0031039    1.020177  -4.107368   3.325766
         x91 |      4,642   -.0212069    1.008708   -4.16458   3.503644
         x92 |      4,642    .0076449    1.004589  -3.449011   3.959166
         x93 |      4,642    .0049339    1.004513  -4.274254   3.777972
         x94 |      4,642    .0124264    .9818583  -3.659006   3.658309
-------------+---------------------------------------------------------
         x95 |      4,642    .0044283    1.010194   -3.41615   3.724456
       touse |      4,642    .1077122      .31005          0          1
         wgt |      4,642    1.993316    .4062602   .6638338   3.540576
          y1 |      4,642     3361.68    578.8196        340       5500
   y1_binary |      4,642    .9396812    .2381022          0          1
. if (trim("`depvarlist'") != "") local depvaropt depvarlist(`depvarlist')
. ereturn clear
.  return clear
. 
. // balance before matching
. psweight balanceonly `treatvar' `varlist' if `tousevar', ntable


-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913        .75  -.2826087  -.6149214   .4595851   1.338962
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0269608  -.0160912  -.1050325   .1532023   .4133173
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0441176  -.0223785  -.1140856   .1961554   .5085817
             |
          x4 |  .4347826    .495098  -.0603154  -.1205719   .5002444   .9914484
          x5 |  25.46739   26.56863  -1.101236  -.1896219   5.807538   .8589874
          x6 |  11.86957   13.15931  -1.289749  -.5792408   2.226619   .4958356
          x7 |  6.858696   6.696078   .1626172   .0485796   3.347437   1.160037
         x90 |  .0972024   -.048508   .1457105   .1481119   .9837861   .9289414
         x91 | -.0890157  -.0077434  -.0812723  -.0817633   .9939954   .8791918
         x92 |  .0453787  -.0227801   .0681588   .0671946   1.014349   1.090179
         x93 |  .0865687   .0403853   .0461833   .0471721   .9790382   .8926169
         x94 | -.1299173   .0160559  -.1459732  -.1488088   .9809449   .8686432
         x95 | -.0807251  -.0658282  -.0148969  -.0150884   .9873048   .8285405
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.12754
  Mean absolute standardized diff.    = 0.17540
  Maximum absolute standardized diff. = 0.61492
New variables created: _weight _weight_mtch _pscore _treated 
  
-------------------------------------------------------
                      | Treatment    Control      Total
----------------------+--------------------------------
       Number of rows |        92        408        500
Sum of sample weights |        92        408        500
       Sum of weights |        92        408        500
-------------------------------------------------------
. ereturn list

macros:
                e(cmd) : "psweight"
            e(cmdline) : "psweight balanceonly treat x1 i.x2 i.x3 x4 x5 x6 x7 x9* if touse, ntable"
             e(subcmd) : "balanceonly"
          e(tmvarlist) : "x1 0b.x2 1.x2 0b.x3 1.x3 x4 x5 x6 x7 x90 x91 x92 x93 x94 x95"
               e(tvar) : "treat"
               e(stat) : "n/a"
.  return list

scalars:
            r(sum_w_0) =  408
            r(sum_w_1) =  92
              r(sum_w) =  500
           r(sum_sw_0) =  408
           r(sum_sw_1) =  92
             r(sum_sw) =  500
             r(N0_raw) =  408
             r(N1_raw) =  92
              r(N_raw) =  500
            r(max_asd) =  .6149214017045797
           r(mean_asd) =  .1753994534212237
            r(mean_sd) =  -.1275443258377829
          r(k_omitted) =  2

macros:
            r(varlist) : "treat x1 0b.x2 1.x2 0b.x3 1.x3 x4 x5 x6 x7 x90 x91 x92 x93 x94 x95"

matrices:
            r(N_table) :  3 x 3
            r(stddiff) :  1 x 15
               r(diff) :  1 x 15
                r(bal) :  15 x 6
           r(varratio) :  1 x 15
. 
. psweight balanceonly `treatvar' `varlist' if `tousevar' [iw=`wgtvar']


-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .7470371   -.295814  -.6408853   .4615709   1.316024
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0270527  -.0156488   -.101817   .1536956   .4301765
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0427955  -.0187318  -.0962824   .1945504   .5757804
             |
          x4 |  .4218861   .4976147  -.0757286  -.1514604   .4999897   .9798375
          x5 |  25.44699    26.4983  -1.051311   -.181681   5.786576    .858714
          x6 |  11.84757   13.15616  -1.308591  -.5865399   2.231034   .5205072
          x7 |  7.015422   6.717714   .2977072   .0885763   3.361025   1.149851
         x90 |  .0839738  -.0392197   .1231936   .1243171   .9909619   .9265459
         x91 | -.0648837  -.0073142  -.0575695  -.0586888   .9809269   .8980782
         x92 |  .0575388  -.0253504   .0828891   .0822314   1.007999   1.068619
         x93 |  .1016523   .0464178   .0552345   .0565711   .9763727   .9263536
         x94 | -.1252265   .0045953  -.1298217  -.1327548   .9779064   .8528771
         x95 | -.1044649  -.0695904  -.0348746  -.0353142   .9875497   .8141756
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.12567
  Mean absolute standardized diff.    = 0.17978
  Maximum absolute standardized diff. = 0.64089
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight balanceonly `treatvar' `varlist' if `tousevar', mweight(`wgtvar') ate


  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .7470371   -.295814  -.6408853   .4615709   1.316024
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0270527  -.0156488   -.101817   .1536956   .4301765
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0427955  -.0187318  -.0962824   .1945504   .5757804
             |
          x4 |  .4218861   .4976147  -.0757286  -.1514604   .4999897   .9798375
          x5 |  25.44699    26.4983  -1.051311   -.181681   5.786576    .858714
          x6 |  11.84757   13.15616  -1.308591  -.5865399   2.231034   .5205072
          x7 |  7.015422   6.717714   .2977072   .0885763   3.361025   1.149851
         x90 |  .0839738  -.0392197   .1231936   .1243171   .9909619   .9265459
         x91 | -.0648837  -.0073142  -.0575695  -.0586888   .9809269   .8980782
         x92 |  .0575388  -.0253504   .0828891   .0822314   1.007999   1.068619
         x93 |  .1016523   .0464178   .0552345   .0565711   .9763727   .9263536
         x94 | -.1252265   .0045953  -.1298217  -.1327548   .9779064   .8528771
         x95 | -.1044649  -.0695904  -.0348746  -.0353142   .9875497   .8141756
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.12567
  Mean absolute standardized diff.    = 0.17978
  Maximum absolute standardized diff. = 0.64089
  C.V. of matching weights:           = 0.20180
  S.D. of matching weights:           = 0.39656
  Skewness of matching weights:       = 0.00210
  Kurtosis of matching weights:       = 0.00549
  Maximum matching weight:            = 3.23664
New variables created: _weight _weight_mtch _pscore _treated 
  
. 
. // * UNWEIGHTED DATA EXAMPLES *
. 
. // Replicate CBPS
. cbps `treatvar' `varlist' if `tousevar' , ate logit optimization_technique("nr") evaluator_type("gf1")
Iteration 0:   f(p) =  .00647386  
Iteration 1:   f(p) =  .00451406  
Iteration 2:   f(p) =   .0005336  
Iteration 3:   f(p) =  .00001373  
Iteration 4:   f(p) =  2.637e-08  
Iteration 5:   f(p) =  6.777e-13  
Iteration 6:   f(p) =  1.066e-21  
------------------------------------------------------------------------------
       treat |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
treat        |
          x1 |  -1.441064   .5046768    -2.86   0.004    -2.430213   -.4519161
        1.x2 |  -2.548784   3.501511    -0.73   0.467     -9.41162    4.314051
        1.x3 |   -1.02318   2.005094    -0.51   0.610    -4.953091    2.906732
          x4 |  -.2320966   .5678014    -0.41   0.683    -1.344967    .8807737
          x5 |   .0736983    .042799     1.72   0.085    -.0101862    .1575829
          x6 |  -.4863391   .1923869    -2.53   0.011    -.8634106   -.1092676
          x7 |   .0655415   .0720901     0.91   0.363    -.0757525    .2068354
         x90 |   .0303861    .203675     0.15   0.881    -.3688096    .4295819
         x91 |  -.0236437   .2499136    -0.09   0.925    -.5134655     .466178
         x92 |   .2014652   .2092517     0.96   0.336    -.2086606    .6115911
         x93 |  -.0067202   .2511949    -0.03   0.979    -.4990531    .4856126
         x94 |  -.3662317   .2431817    -1.51   0.132     -.842859    .1103956
         x95 |  -.0080118   .2531324    -0.03   0.975    -.5041423    .4881187
       _cons |   3.127763   1.826429     1.71   0.087    -.4519713    6.707497
------------------------------------------------------------------------------
. ereturn clear
.  return clear
. 
. psweight cbps `treatvar' `varlist' if `tousevar' , ate pooledvariance `depvaropt' ntable



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  2.590e-08  
Iteration 1:   f(p) =  2.548e-08  (backed up)
Iteration 2:   f(p) =  1.980e-08  
Iteration 3:   f(p) =  1.652e-08  
Iteration 4:   f(p) =  1.627e-08  
Iteration 5:   f(p) =  1.540e-08  
Iteration 6:   f(p) =  1.451e-08  
Iteration 7:   f(p) =  1.377e-08  
Iteration 8:   f(p) =  1.290e-08  
Iteration 9:   f(p) =  1.195e-08  
Iteration 10:  f(p) =  1.168e-08  
Iteration 11:  f(p) =  1.075e-08  
Iteration 12:  f(p) =  1.026e-08  
Iteration 13:  f(p) =  1.005e-08  
Iteration 14:  f(p) =  9.509e-09  
Iteration 15:  f(p) =  9.074e-09  
Iteration 16:  f(p) =  6.361e-09  
Iteration 17:  f(p) =  2.702e-09  
Iteration 18:  f(p) =  2.272e-09  
Iteration 19:  f(p) =  1.867e-09  
Iteration 20:  f(p) =  1.339e-09  
Iteration 21:  f(p) =  1.242e-09  
Iteration 22:  f(p) =  1.149e-09  
Iteration 23:  f(p) =  9.784e-10  
Iteration 24:  f(p) =  9.420e-10  
Iteration 25:  f(p) =  9.360e-10  
Iteration 26:  f(p) =  9.200e-10  
Iteration 27:  f(p) =  9.147e-10  
Iteration 28:  f(p) =  9.058e-10  
Iteration 29:  f(p) =  7.129e-10  
Iteration 30:  f(p) =  3.744e-10  
Iteration 31:  f(p) =  2.987e-10  
Iteration 32:  f(p) =  2.963e-10  
Iteration 33:  f(p) =  2.653e-10  
Iteration 34:  f(p) =  9.786e-11  
Iteration 35:  f(p) =  7.971e-12  
Iteration 36:  f(p) =  7.291e-13  
Iteration 37:  f(p) =  7.440e-15  
Iteration 38:  f(p) =  1.955e-16  
Iteration 39:  f(p) =  1.491e-19  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.441064
        1.x2 |  -2.548779
        1.x3 |  -1.023181
          x4 |  -.2320959
          x5 |   .0736984
          x6 |  -.4863391
          x7 |   .0655414
         x90 |   .0303861
         x91 |  -.0236438
         x92 |    .201465
         x93 |  -.0067204
         x94 |  -.3662318
         x95 |  -.0080117
       _cons |   3.127762
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
-------------------------------------------------------
                      | Treatment    Control      Total
----------------------+--------------------------------
       Number of rows |        92        408        500
Sum of sample weights |        92        408        500
       Sum of weights |        92        408        500
-------------------------------------------------------
. ereturn list

scalars:
                  e(N) =  500

macros:
                e(cmd) : "psweight"
            e(cmdline) : "psweight cbps treat x1 i.x2 i.x3 x4 x5 x6 x7 x9* if touse , ate pooledvariance depvarlist(y1 y1_binary) ntable"
             e(subcmd) : "cbps"
         e(depvarlist) : "y1 y1_binary"
          e(tmvarlist) : "x1 0b.x2 1.x2 0b.x3 1.x3 x4 x5 x6 x7 x90 x91 x92 x93 x94 x95"
               e(tvar) : "treat"
           e(variance) : "pooledvariance"
               e(stat) : "ate"
         e(properties) : "b"
             e(depvar) : "treat"

matrices:
                  e(b) :  1 x 16

functions:
             e(sample)   
.  return list

scalars:
            r(sum_w_0) =  408
            r(sum_w_1) =  92
              r(sum_w) =  500
           r(sum_sw_0) =  408
           r(sum_sw_1) =  92
             r(sum_sw) =  500
             r(N0_raw) =  408
             r(N1_raw) =  92
              r(N_raw) =  500

macros:
           r(mcmethod) : "noadjust"

matrices:
            r(N_table) :  3 x 3
              r(table) :  1 x 16
. 
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6750468   .6750468  -3.26e-08  -6.96e-08   .4688264   1.008511
             |
          x2 |
          0  |  (empty)
          1  |  .0219356   .0219357  -9.38e-08  -6.39e-07   .1466203   1.008507
             |
          x3 |
          0  |  (empty)
          1  |  .0370067   .0370067   3.80e-08   2.01e-07   .1889672   1.008512
             |
          x4 |  .4861037   .4861037  -9.12e-09  -1.82e-08   .5003074   1.008511
          x5 |  26.25386   26.25386  -4.03e-08  -6.43e-09   6.268993   .6747771
          x6 |  12.63471   12.63471   5.66e-08   2.41e-08   2.343236   .5637226
          x7 |  6.724952   6.724952   3.56e-07   1.06e-07   3.360602   1.190087
         x90 | -.0592247  -.0592246  -9.89e-08  -9.48e-08   1.042785   1.206643
         x91 |  .0116974   .0116973   1.21e-07   1.23e-07   .9810721   .9436962
         x92 | -.0041245  -.0041245   8.24e-08   8.08e-08   1.020036   1.339887
         x93 |   .044381   .0443809   1.41e-07   1.45e-07   .9681889   .8469645
         x94 | -.0856687  -.0856689   1.86e-07   1.83e-07   1.015864   .7767334
         x95 | -.0859155  -.0859154  -8.61e-08  -8.82e-08   .9766877   .8347645
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00000
  C.V. of matching weights:           = 0.52754
  S.D. of matching weights:           = 0.52754
  Skewness of matching weights:       = 0.21587
  Kurtosis of matching weights:       = 0.08607
  Maximum matching weight:            = 6.90640
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3444.163     3444.163   2.17e-06   1.42e-08   3444.163
   y1_binary |    .9544751     .9544751   1.31e-09   2.90e-08   .9544751
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. ereturn list

scalars:
                  e(N) =  500

macros:
                e(cmd) : "psweight"
            e(cmdline) : "psweight call balanceresults()"
             e(subcmd) : "call"
         e(depvarlist) : "y1 y1_binary"
          e(tmvarlist) : "x1 0b.x2 1.x2 0b.x3 1.x3 x4 x5 x6 x7 x90 x91 x92 x93 x94 x95"
               e(tvar) : "treat"
           e(variance) : "pooledvariance"
               e(stat) : "ate"
         e(properties) : "b"
             e(depvar) : "treat"

matrices:
                  e(b) :  1 x 16

functions:
             e(sample)   
. return list

scalars:
            r(wgt_max) =  6.906403316122208
       r(wgt_kurtosis) =  .0860730631906134
       r(wgt_skewness) =  .2158749482118905
             r(wgt_sd) =  .5275373894533257
             r(wgt_cv) =  .5275373894533257
            r(max_asd) =  6.39460380840e-07
           r(mean_asd) =  1.36893718545e-07
            r(mean_sd) =  -4.14074536359e-09

matrices:
           r(progdiff) :  2 x 5
            r(stddiff) :  1 x 15
               r(diff) :  1 x 15
                r(bal) :  15 x 6
           r(varratio) :  1 x 15
. psweight // test replay
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.441064
        1.x2 |  -2.548779
        1.x3 |  -1.023181
          x4 |  -.2320959
          x5 |   .0736984
          x6 |  -.4863391
          x7 |   .0655414
         x90 |   .0303861
         x91 |  -.0236438
         x92 |    .201465
         x93 |  -.0067204
         x94 |  -.3662318
         x95 |  -.0080117
       _cons |   3.127762
------------------------------------------------------------------------------
. 
. cbps `treatvar' `varlist' if `tousevar' , ate over logit optimization_technique("nr") evaluator_type("gf1")
Iteration 0:   f(p) =  .02441999  (not concave)
Iteration 1:   f(p) =    .020112  
Iteration 2:   f(p) =  .01484746  
Iteration 3:   f(p) =   .0142955  
Iteration 4:   f(p) =  .01428412  
Iteration 5:   f(p) =  .01428407  
Iteration 6:   f(p) =  .01428407  
------------------------------------------------------------------------------
       treat |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
treat        |
          x1 |  -1.074574   .2572873    -4.18   0.000    -1.578848      -.5703
        1.x2 |  -1.732571    .847337    -2.04   0.041    -3.393321   -.0718214
        1.x3 |   -.535995   .6259896    -0.86   0.392    -1.762912    .6909221
          x4 |  -.2389831   .2458124    -0.97   0.331    -.7207666    .2428004
          x5 |   .0484453   .0243181     1.99   0.046     .0007828    .0961078
          x6 |  -.2519975   .0459113    -5.49   0.000    -.3419819    -.162013
          x7 |   .0081703   .0322545     0.25   0.800    -.0550474    .0713879
         x90 |    .120204   .1075227     1.12   0.264    -.0905366    .3309445
         x91 |  -.1467757   .1099013    -1.34   0.182    -.3621782    .0686269
         x92 |   .1315867   .1151671     1.14   0.253    -.0941367    .3573101
         x93 |    .086207   .1113523     0.77   0.439    -.1320395    .3044534
         x94 |  -.1702521    .103099    -1.65   0.099    -.3723225    .0318183
         x95 |   .0217906    .112224     0.19   0.846    -.1981643    .2417456
       _cons |   1.206345   .6074599     1.99   0.047      .015746    2.396945
------------------------------------------------------------------------------
J test for overidentifying restrictions: P(chisq>7.142, 14) = 0.929
. psweight cbpsoid `treatvar' `varlist' if `tousevar' , ate pooledvariance  `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  9.768e-08  
Iteration 1:   f(p) =  9.599e-08  (backed up)
Iteration 2:   f(p) =  7.672e-08  
Iteration 3:   f(p) =  6.399e-08  
Iteration 4:   f(p) =  6.304e-08  
Iteration 5:   f(p) =  6.026e-08  
Iteration 6:   f(p) =  5.854e-08  
Iteration 7:   f(p) =  5.801e-08  
Iteration 8:   f(p) =  5.780e-08  
Iteration 9:   f(p) =  5.775e-08  
Iteration 10:  f(p) =  5.764e-08  
Iteration 11:  f(p) =  5.743e-08  
Iteration 12:  f(p) =  5.722e-08  
Iteration 13:  f(p) =  5.718e-08  
Iteration 14:  f(p) =  5.716e-08  
Iteration 15:  f(p) =  5.715e-08  
Iteration 16:  f(p) =  5.715e-08  
Iteration 17:  f(p) =  5.715e-08  
Iteration 18:  f(p) =  5.715e-08  
Iteration 19:  f(p) =  5.714e-08  
Iteration 20:  f(p) =  5.714e-08  
Iteration 21:  f(p) =  5.714e-08  
Iteration 22:  f(p) =  5.714e-08  
Iteration 23:  f(p) =  5.714e-08  
Iteration 24:  f(p) =  5.714e-08  
Iteration 25:  f(p) =  5.714e-08  
Iteration 26:  f(p) =  5.714e-08  
Iteration 27:  f(p) =  5.714e-08  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (over identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.074574
        1.x2 |  -1.732572
        1.x3 |  -.5359934
          x4 |  -.2389832
          x5 |   .0484453
          x6 |  -.2519976
          x7 |   .0081703
         x90 |    .120204
         x91 |  -.1467759
         x92 |   .1315865
         x93 |   .0862071
         x94 |   -.170252
         x95 |   .0217913
       _cons |   1.206346
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6406563   .7027892  -.0621329  -.1343716   .4623962   1.111543
             |
          x2 |
          0  |  (empty)
          1  |  .0157701   .0233767  -.0076066  -.0518321   .1467555   .6856468
             |
          x3 |
          0  |  (empty)
          1  |  .0248069   .0398362  -.0150293  -.0794677   .1891246   .6378531
             |
          x4 |  .4886895   .4862356   .0024538   .0049045   .5003233   1.008759
          x5 |  25.82556   26.34781  -.5222466   -.087499   5.968599     .75999
          x6 |  12.33004    12.9064  -.5763636  -.2576162   2.237296   .5881094
          x7 |  6.884519   6.669732   .2147874   .0639212   3.360189   1.180429
         x90 | -.0713185  -.0265029  -.0448156  -.0441807   1.014371   1.157748
         x91 |  .0200092   -.022611   .0426201   .0430283   .9905145   .9174008
         x92 |  .0040224  -.0083768   .0123991   .0121514   1.020391   1.200576
         x93 |   .022949   .0551791  -.0322301    -.03319   .9710768   .8891007
         x94 | -.1215951  -.0231316  -.0984635  -.0994522    .990058   .8143466
         x95 |  -.095014  -.0715949  -.0234192  -.0239414   .9781896   .8041465
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.05289
  Mean absolute standardized diff.    = 0.07197
  Maximum absolute standardized diff. = 0.25762
  C.V. of matching weights:           = 0.29590
  S.D. of matching weights:           = 0.29590
  Skewness of matching weights:       = 0.15745
  Kurtosis of matching weights:       = 0.06543
  Maximum matching weight:            = 4.20459
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3443.444     3453.946  -10.50206  -.0757772   3453.946
   y1_binary |    .9509072     .9588221  -.0079149  -.1916554   .9588221
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. cbps `treatvar' `varlist' if `tousevar' , att logit optimization_technique("nr") evaluator_type("gf1")
Iteration 0:   f(p) =  .00197031  
Iteration 1:   f(p) =  .00006892  
Iteration 2:   f(p) =  1.777e-07  
Iteration 3:   f(p) =  2.570e-12  
Iteration 4:   f(p) =  6.940e-22  
------------------------------------------------------------------------------
       treat |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
treat        |
          x1 |  -1.339291   .3615444    -3.70   0.000    -2.047905   -.6306769
        1.x2 |  -1.525175    1.19071    -1.28   0.200    -3.858923    .8085728
        1.x3 |  -.5996277   .8424377    -0.71   0.477    -2.250775     1.05152
          x4 |  -.3183658   .3103113    -1.03   0.305    -.9265647    .2898331
          x5 |   .0587883     .02835     2.07   0.038     .0032234    .1143533
          x6 |  -.2435676   .0675718    -3.60   0.000    -.3760059   -.1111292
          x7 |   .0341034   .0400884     0.85   0.395    -.0444685    .1126752
         x90 |    .158599   .1286436     1.23   0.218    -.0935378    .4107357
         x91 |  -.1617619    .131618    -1.23   0.219    -.4197284    .0962045
         x92 |   .1391156   .1358437     1.02   0.306    -.1271333    .4053644
         x93 |   .0571151    .134574     0.42   0.671    -.2066451    .3208752
         x94 |  -.1175052   .1193236    -0.98   0.325    -.3513752    .1163649
         x95 |    .011505   .1383574     0.08   0.934    -.2596705    .2826805
       _cons |    .782858    .962964     0.81   0.416    -1.104517    2.670233
------------------------------------------------------------------------------
. psweight cbps `treatvar' `varlist' if `tousevar' , atet pooledvariance  `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  7.881e-09  
Iteration 1:   f(p) =  7.799e-09  (backed up)
Iteration 2:   f(p) =  7.301e-09  
Iteration 3:   f(p) =  5.045e-09  
Iteration 4:   f(p) =  4.162e-09  
Iteration 5:   f(p) =  3.700e-09  
Iteration 6:   f(p) =  3.063e-09  
Iteration 7:   f(p) =  2.655e-09  
Iteration 8:   f(p) =  2.353e-09  
Iteration 9:   f(p) =  2.232e-09  
Iteration 10:  f(p) =  1.928e-09  
Iteration 11:  f(p) =  1.687e-09  
Iteration 12:  f(p) =  1.155e-09  
Iteration 13:  f(p) =  8.603e-10  
Iteration 14:  f(p) =  7.496e-10  
Iteration 15:  f(p) =  4.771e-10  
Iteration 16:  f(p) =  2.778e-10  
Iteration 17:  f(p) =  7.348e-11  
Iteration 18:  f(p) =  4.499e-11  
Iteration 19:  f(p) =  4.379e-11  
Iteration 20:  f(p) =  3.501e-11  
Iteration 21:  f(p) =  2.719e-11  
Iteration 22:  f(p) =  5.991e-12  
Iteration 23:  f(p) =  1.225e-12  
Iteration 24:  f(p) =  1.153e-12  
Iteration 25:  f(p) =  1.081e-12  
Iteration 26:  f(p) =  8.074e-13  
Iteration 27:  f(p) =  5.560e-13  
Iteration 28:  f(p) =  1.140e-13  
Iteration 29:  f(p) =  2.312e-15  
Iteration 30:  f(p) =  4.524e-18  
Iteration 31:  f(p) =  2.979e-20  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.339291
        1.x2 |  -1.525175
        1.x3 |  -.5996277
          x4 |  -.3183657
          x5 |   .0587884
          x6 |  -.2435675
          x7 |   .0341033
         x90 |    .158599
         x91 |   -.161762
         x92 |   .1391156
         x93 |   .0571151
         x94 |  -.1175052
         x95 |   .0115051
       _cons |   .7828573
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4673913   3.89e-08   7.79e-08   .4994352   1.008511
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0108696  -6.52e-09  -6.28e-08   .1037929    1.00851
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0217391  -4.28e-09  -2.93e-08   .1459766   1.008511
             |
          x4 |  .4347826   .4347826   3.07e-09   6.18e-09   .4962249   1.008511
          x5 |  25.46739   25.46739  -3.12e-07  -4.68e-08   6.664728   .6195799
          x6 |  11.86957   11.86957  -9.83e-08  -4.81e-08   2.043536   .5669465
          x7 |  6.858696   6.858695   1.84e-07   5.48e-08   3.363971   1.145237
         x90 |  .0972024   .0972025  -2.95e-08  -2.89e-08   1.021603    .845302
         x91 | -.0890157  -.0890157   6.46e-09   6.76e-09   .9556678   .9654928
         x92 |  .0453787   .0453787  -3.77e-08  -3.78e-08   .9971707   1.136731
         x93 |  .0865687   .0865687  -2.71e-08  -2.85e-08     .95074   .9577068
         x94 | -.1299173  -.1299173   1.47e-08   1.43e-08    1.02511   .7795321
         x95 | -.0807251   -.080725  -9.60e-08  -1.00e-07   .9586344   .8888006
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00000
  C.V. of matching weights:           = 0.98844
  S.D. of matching weights:           = 0.98844
  Skewness of matching weights:       = 0.11001
  Kurtosis of matching weights:       = 0.02254
  Maximum matching weight:            = 7.03226
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.753     3424.753  -2.51e-06  -1.51e-08   3424.753
   y1_binary |    .9470393     .9470393  -3.24e-09  -6.07e-08   .9470393
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. cbps `treatvar' `varlist' if `tousevar' , att over logit optimization_technique("nr") evaluator_type("gf1")
Iteration 0:   f(p) =  .04521356  
Iteration 1:   f(p) =  .03210384  
Iteration 2:   f(p) =   .0303286  
Iteration 3:   f(p) =   .0302734  
Iteration 4:   f(p) =  .03027339  
Iteration 5:   f(p) =  .03027339  
------------------------------------------------------------------------------
       treat |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
treat        |
          x1 |  -1.171988   .2187737    -5.36   0.000    -1.600776   -.7431991
        1.x2 |  -1.909814   .6607307    -2.89   0.004    -3.204822   -.6148052
        1.x3 |  -.4402667   .7269474    -0.61   0.545    -1.865057     .984524
          x4 |  -.3130788   .2251092    -1.39   0.164    -.7542848    .1281272
          x5 |   .0503881   .0191417     2.63   0.008     .0128711    .0879051
          x6 |  -.2393185   .0575186    -4.16   0.000     -.352053   -.1265841
          x7 |   .0261168   .0311563     0.84   0.402    -.0349484    .0871821
         x90 |   .1425533   .1007579     1.41   0.157    -.0549285    .3400351
         x91 |  -.1282785   .1127153    -1.14   0.255    -.3491964    .0926393
         x92 |      .1073   .1112316     0.96   0.335    -.1107099    .3253099
         x93 |   .0527165   .1101053     0.48   0.632    -.1630859    .2685189
         x94 |  -.1248021   .0971592    -1.28   0.199    -.3152305    .0656263
         x95 |   .0220743   .1115296     0.20   0.843    -.1965196    .2406683
       _cons |   .9132207   .6048419     1.51   0.131    -.2722476    2.098689
------------------------------------------------------------------------------
J test for overidentifying restrictions: P(chisq>15.137, 14) = 0.369
. psweight cbpsoid `treatvar' `varlist' if `tousevar' , atet pooledvariance  `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  1.809e-07  
Iteration 1:   f(p) =  1.775e-07  (backed up)
Iteration 2:   f(p) =  1.749e-07  
Iteration 3:   f(p) =  1.665e-07  
Iteration 4:   f(p) =  1.593e-07  
Iteration 5:   f(p) =  1.436e-07  
Iteration 6:   f(p) =  1.400e-07  
Iteration 7:   f(p) =  1.356e-07  
Iteration 8:   f(p) =  1.328e-07  
Iteration 9:   f(p) =  1.272e-07  
Iteration 10:  f(p) =  1.231e-07  
Iteration 11:  f(p) =  1.224e-07  
Iteration 12:  f(p) =  1.220e-07  
Iteration 13:  f(p) =  1.219e-07  
Iteration 14:  f(p) =  1.218e-07  
Iteration 15:  f(p) =  1.217e-07  
Iteration 16:  f(p) =  1.213e-07  
Iteration 17:  f(p) =  1.212e-07  
Iteration 18:  f(p) =  1.212e-07  
Iteration 19:  f(p) =  1.212e-07  
Iteration 20:  f(p) =  1.211e-07  
Iteration 21:  f(p) =  1.211e-07  
Iteration 22:  f(p) =  1.211e-07  
Iteration 23:  f(p) =  1.211e-07  
Iteration 24:  f(p) =  1.211e-07  
Iteration 25:  f(p) =  1.211e-07  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (over identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.171988
        1.x2 |  -1.909811
        1.x3 |  -.4402665
          x4 |  -.3130787
          x5 |   .0503881
          x6 |  -.2393185
          x7 |   .0261168
         x90 |   .1425533
         x91 |  -.1282785
         x92 |      .1073
         x93 |   .0527165
         x94 |  -.1248021
         x95 |   .0220743
       _cons |   .9132204
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4923282  -.0249369  -.0498389   .5003503   1.004458
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0074884   .0033811   .0376593   .0897825   1.458884
             |
          x3 |
          0  |  (empty)
          1  |  .0217391    .023711  -.0019719  -.0130452    .151158   .9265073
             |
          x4 |  .4347826    .438673  -.0038904  -.0078335   .4966326   1.006495
          x5 |  25.46739   25.45801   .0093786   .0014149   6.628535   .6273162
          x6 |  11.86957   11.89491  -.0253428  -.0123238     2.0564    .559006
          x7 |  6.858696   6.790863   .0678325    .020134    3.36906   1.140985
         x90 |  .0972024   .0826851   .0145173    .014215   1.021263   .8460037
         x91 | -.0890157  -.0671192  -.0218965  -.0227622   .9619657   .9503048
         x92 |  .0453787   .0235132   .0218655   .0219385   .9966695   1.138269
         x93 |  .0865687   .0849356    .001633   .0017143   .9526181   .9531308
         x94 | -.1299173  -.1339674   .0040502   .0039553   1.023979   .7815571
         x95 | -.0807251  -.0745052  -.0062199  -.0064787   .9600495   .8856706
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00087
  Mean absolute standardized diff.    = 0.01641
  Maximum absolute standardized diff. = 0.04984
  C.V. of matching weights:           = 0.91559
  S.D. of matching weights:           = 0.91559
  Skewness of matching weights:       = 0.10408
  Kurtosis of matching weights:       = 0.02134
  Maximum matching weight:            = 6.68335
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.722     3428.063  -3.341103  -.0202642   3428.063
   y1_binary |    .9470466     .9484255  -.0013789  -.0265328   .9484255
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. // After calling psweight, the data is stored in a class instance named psweight_ado_most_recent
. // You can print any of the public functions or variables to the screen with psweight call. For example:
. psweight call diff()
                  1              2              3              4              5              6              7              8              9             10
    +-------------------------------------------------------------------------------------------------------------------------------------------------------
  1 |  -.0249369238              0     .003381148              0    -.001971892   -.0038903597    .0093785822   -.0253427544    .0678325325     .014517298
    +-------------------------------------------------------------------------------------------------------------------------------------------------------
                 11             12             13             14             15
     ----------------------------------------------------------------------------+
  1    -.0218964943    .0218654581     .001633036    .0040501691   -.0062199121  |
     ----------------------------------------------------------------------------+
. psweight call balancetable()
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4923282  -.0249369  -.0498389   .5003503   1.004458
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0074884   .0033811   .0376593   .0897825   1.458884
             |
          x3 |
          0  |  (empty)
          1  |  .0217391    .023711  -.0019719  -.0130452    .151158   .9265073
             |
          x4 |  .4347826    .438673  -.0038904  -.0078335   .4966326   1.006495
          x5 |  25.46739   25.45801   .0093786   .0014149   6.628535   .6273162
          x6 |  11.86957   11.89491  -.0253428  -.0123238     2.0564    .559006
          x7 |  6.858696   6.790863   .0678325    .020134    3.36906   1.140985
         x90 |  .0972024   .0826851   .0145173    .014215   1.021263   .8460037
         x91 | -.0890157  -.0671192  -.0218965  -.0227622   .9619657   .9503048
         x92 |  .0453787   .0235132   .0218655   .0219385   .9966695   1.138269
         x93 |  .0865687   .0849356    .001633   .0017143   .9526181   .9531308
         x94 | -.1299173  -.1339674   .0040502   .0039553   1.023979   .7815571
         x95 | -.0807251  -.0745052  -.0062199  -.0064787   .9600495   .8856706
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00087
  Mean absolute standardized diff.    = 0.01641
  Maximum absolute standardized diff. = 0.04984
                   1              2              3              4              5              6
     +-------------------------------------------------------------------------------------------+
   1 |   .4673913043    .4923282281   -.0249369238   -.0498389338    .5003502664    1.004458062  |
   2 |             0              0              0              .              0              .  |
   3 |   .0108695652    .0074884172     .003381148      .03765934     .089782455    1.458884137  |
   4 |             0              0              0              .              0              .  |
   5 |   .0217391304    .0237110224    -.001971892   -.0130452337    .1511580419    .9265073401  |
   6 |   .4347826087    .4386729684   -.0038903597   -.0078334758    .4966326326     1.00649479  |
   7 |    25.4673913    25.45801272    .0093785822      .00141488    6.628535351    .6273161762  |
   8 |   11.86956522    11.89490797   -.0253427544   -.0123238431    2.056400288    .5590060148  |
   9 |   6.858695652     6.79086312    .0678325325    .0201339645    3.369059905    1.140985233  |
  10 |   .0972024365    .0826851385     .014517298    .0142150498     1.02126255    .8460036629  |
  11 |  -.0890156845   -.0671191901   -.0218964943     -.02276224    .9619657066    .9503048114  |
  12 |   .0453786792    .0235132211    .0218654581    .0219385247    .9966694861    1.138268864  |
  13 |   .0865686693    .0849356333     .001633036     .001714261    .9526180869    .9531308488  |
  14 |  -.1299172593   -.1339674285    .0040501691    .0039553232    1.023979301     .781557113  |
  15 |  -.0807250915   -.0745051794   -.0062199121   -.0064787409    .9600495159    .8856705724  |
     +-------------------------------------------------------------------------------------------+
. 
. // Other objective functions
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' , atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00032638  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  8.089e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  5.298e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  1.467e-13  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  2.414e-21  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = mean(stddiff())^2
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.206443
        1.x2 |  -1.628676
        1.x3 |  -.5803099
          x4 |  -.2832337
          x5 |   .0694163
          x6 |  -.2787869
          x7 |   .0283209
         x90 |   .1446874
         x91 |  -.1322013
         x92 |   .1288213
         x93 |     .06336
         x94 |  -.1645468
         x95 |   .0190735
       _cons |    1.37953
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5065707  -.0391794   -.078098   .5016695   1.004395
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0094032   .0014663   .0140645   .1042572   1.164051
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0217076   .0000315   .0002148   .1466296   1.009942
             |
          x4 |  .4347826   .4181832   .0165994   .0333023   .4984448   1.018628
          x5 |  25.46739   26.05541  -.5880201  -.1080141   5.443922    .583267
          x6 |  11.86957   11.79935   .0702179   .0437479   1.605057   .5528994
          x7 |  6.858696   6.775281   .0834143   .0234527   3.556704   1.141156
         x90 |  .0972024   .0569964    .040206   .0421541   .9537854   .8487821
         x91 | -.0890157   -.062197  -.0268186  -.0284411   .9429542   .9668971
         x92 |  .0453787   .0391246   .0062541   .0059496   1.051175   1.151879
         x93 |  .0865687   .1044403  -.0178716  -.0191146   .9349714   .9622808
         x94 | -.1299173  -.1873488   .0574315   .0621009   .9248091   .7465145
         x95 | -.0807251  -.0886593   .0079342   .0086807    .914005    .892775
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.03595
  Maximum absolute standardized diff. = 0.10801
  C.V. of matching weights:           = 1.04136
  S.D. of matching weights:           = 1.04136
  Skewness of matching weights:       = 0.17109
  Kurtosis of matching weights:       = 0.06249
  Maximum matching weight:            = 11.09500
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.964     3426.474  -1.509906  -.0096045   3426.474
   y1_binary |    .9468831     .9481476  -.0012646  -.0236201   .9481476
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight sd_sq `treatvar' `varlist' if `tousevar' , atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .02141595  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .02005608  (backed up)
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .01097598  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00782373  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  .00292673  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  .00193285  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  .00085471  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  .00063406  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  .00028285  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  .00013476  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  .00008047  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  .00006325  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =   .0000443  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =  .00003941  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  .00003494  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  .00001414  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  9.450e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  8.233e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  4.845e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  1.918e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  1.597e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  1.597e-07  (backed up)

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = sum(stddiff()^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.339094
        1.x2 |  -1.522717
        1.x3 |  -.6024629
          x4 |  -.3184011
          x5 |   .0587701
          x6 |  -.2435594
          x7 |   .0341083
         x90 |   .1586104
         x91 |  -.1617897
         x92 |   .1392853
         x93 |   .0571801
         x94 |  -.1174441
         x95 |   .0116348
       _cons |   1.412923
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4673974  -6.08e-06  -.0000121   .5016695   1.008509
             |
          x2 |
          0  |  (empty)
          1  |  .0108696    .010884  -.0000145  -.0001389   .1042572   1.007184
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0216918   .0000474   .0003231   .1466296   1.010665
             |
          x4 |  .4347826   .4347917  -9.14e-06  -.0000183   .4984448   1.008506
          x5 |  25.46739   25.46699   .0004057   .0000745   5.443922   .6196141
          x6 |  11.86957   11.86965  -.0000811  -.0000505   1.605057   .5669426
          x7 |  6.858696   6.858709   -.000013  -3.67e-06   3.556704   1.145253
         x90 |  .0972024   .0972214   -.000019  -.0000199   .9537854   .8453063
         x91 | -.0890157  -.0890341   .0000185   .0000196   .9429542   .9654774
         x92 |  .0453787   .0455054  -.0001267  -.0001205   1.051175   1.136737
         x93 |  .0865687   .0866238  -.0000552   -.000059   .9349714   .9577098
         x94 | -.1299173  -.1298667  -.0000506  -.0000547   .9248091   .7795587
         x95 | -.0807251  -.0806563  -.0000688  -.0000753    .914005   .8888531
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00001
  Mean absolute standardized diff.    = 0.00007
  Maximum absolute standardized diff. = 0.00032
  C.V. of matching weights:           = 0.98839
  S.D. of matching weights:           = 0.98839
  Skewness of matching weights:       = 0.11001
  Kurtosis of matching weights:       = 0.02254
  Maximum matching weight:            = 7.03126
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.753     3424.752   .0006725   4.41e-06   3424.752
   y1_binary |    .9470393     .9470403  -1.04e-06  -.0000198   .9470403
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight stdprogdiff `treatvar' `varlist' if `tousevar' , atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00185472  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00101577  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .00027041  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  7.079e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  1.219e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  2.637e-12  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  2.503e-16  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = sum(stdprogdiff()^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.206434
        1.x2 |  -1.628883
        1.x3 |  -.5801518
          x4 |  -.2842213
          x5 |   .0680361
          x6 |  -.2812694
          x7 |   .0362351
         x90 |    .140128
         x91 |   -.133367
         x92 |   .1293803
         x93 |   .0654366
         x94 |   -.170839
         x95 |   .0205359
       _cons |   1.379493
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5034066  -.0360153  -.0717908   .5016695   1.004268
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0094204   .0014491   .0138996   .1042572   1.161947
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0216619   .0000773   .0005269   .1466296   1.012028
             |
          x4 |  .4347826   .4201262   .0146564   .0294042   .4984448   1.017314
          x5 |  25.46739   25.99278  -.5253902  -.0965095   5.443922   .5838664
          x6 |  11.86957   11.78734   .0822287   .0512311   1.605057    .555498
          x7 |  6.858696   6.858077   .0006191   .0001741   3.556704   1.143915
         x90 |  .0972024    .053687   .0435154   .0456239   .9537854   .8476454
         x91 | -.0890157  -.0631467   -.025869   -.027434   .9429542   .9681027
         x92 |  .0453787   .0348442   .0105345   .0100216   1.051175   1.154518
         x93 |  .0865687   .1037551  -.0171864  -.0183818   .9349714   .9597357
         x94 | -.1299173  -.1918304   .0619131   .0669469   .9248091   .7493647
         x95 | -.0807251   -.084959    .004234   .0046323    .914005   .8909527
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00064
  Mean absolute standardized diff.    = 0.03358
  Maximum absolute standardized diff. = 0.09651
  C.V. of matching weights:           = 1.04581
  S.D. of matching weights:           = 1.04581
  Skewness of matching weights:       = 0.16632
  Kurtosis of matching weights:       = 0.05875
  Maximum matching weight:            = 10.93715
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.984     3424.984   2.38e-06   1.51e-08   3424.984
   y1_binary |    .9469116     .9469116   2.61e-10   4.82e-09   .9469116
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. 
. // IPW
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' , atet aequations

Iteration 0:   EE criterion =  5.570e-18  
Iteration 1:   EE criterion =  4.891e-26  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATET                    |
                  treat |
(Treated vs Untreated)  |  -365.5251   68.93598    -5.30   0.000    -500.6371   -230.4131
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
             Untreated  |   3417.895   43.41569    78.72   0.000     3332.801    3502.988
------------------------+----------------------------------------------------------------
TME1                    |
                     x1 |  -1.207512   .3268258    -3.69   0.000    -1.848079   -.5669452
                        |
                     x2 |
                     1  |  -1.628792   1.054719    -1.54   0.123    -3.696005    .4384199
                        |
                     x3 |
                     1  |  -.5805318   .8259794    -0.70   0.482    -2.199422    1.038358
                     x4 |  -.2831153   .2838113    -1.00   0.318    -.8393752    .2731445
                     x5 |   .0545179   .0270259     2.02   0.044     .0015481    .1074878
                     x6 |  -.2844593   .0688093    -4.13   0.000     -.419323   -.1495955
                     x7 |    .023871   .0390129     0.61   0.541    -.0525929    .1003349
                    x90 |   .1439494   .1292697     1.11   0.265    -.1094145    .3973133
                    x91 |  -.1331182   .1248073    -1.07   0.286    -.3777361    .1114997
                    x92 |   .1277527    .133834     0.95   0.340    -.1345572    .3900625
                    x93 |   .0623585   .1243317     0.50   0.616    -.1813271    .3060441
                    x94 |  -.1663354   .1194682    -1.39   0.164    -.4004887    .0678179
                    x95 |    .017776   .1254901     0.14   0.887    -.2281801     .263732
                  _cons |   1.379538   .9297905     1.48   0.138    -.4428177    3.201894
-----------------------------------------------------------------------------------------
. di _b[POmean:0.treat]
3417.8947
. tebalance summarize

  Covariate balance summary
                                                   Raw     Weighted
                          -----------------------------------------
                          Number of obs =          500        500.0
                          Treated obs   =           92        247.8
                          Control obs   =          408        252.2
                          -----------------------------------------

  -----------------------------------------------------------------
                  |Standardized differences          Variance ratio
                  |        Raw    Weighted           Raw   Weighted
  ----------------+------------------------------------------------
               x1 |  -.6027752   -.0090577      1.338962   .9989677
                  |
               x2 |
               1  |  -.1180374    .0096998      .4133173   1.098626
                  |
               x3 |
               1  |  -.1253201    .0022927      .5085817   1.015318
                  |
               x4 |  -.1207472   -.0222549      .9914484   .9947225
               x5 |  -.1944638    .0308855      .8589874   .5917507
               x6 |  -.6542694    .0952268      .4958356   .5601212
               x7 |   .0473848    .0429284      1.160037   1.132231
              x90 |   .1499304    .0130255      .9289414   .8182649
              x91 |  -.0833726   -.0288848      .8791918   .9584288
              x92 |   .0662245    .0110605      1.090179   1.139468
              x93 |   .0479737   -.0087695      .8926169   .9659809
              x94 |  -.1521926    .0562648      .8686432   .7583723
              x95 |  -.0155155     .017858      .8285405   .8879817
  -----------------------------------------------------------------
. tebalance summarize, baseline

  Covariate balance summary
                                                   Raw     Weighted
                          -----------------------------------------
                          Number of obs =          500        500.0
                          Treated obs   =           92        247.8
                          Control obs   =          408        252.2
                          -----------------------------------------

  -----------------------------------------------------------------
                  |           Means                  Variances     
                  |    Control     Treated       Control    Treated
  ----------------+------------------------------------------------
               x1 |        .75    .4673913      .1879607   .2516722
                  |
               x2 |
               1  |   .0269608    .0108696      .0262984   .0108696
                  |
               x3 |
               1  |   .0441176    .0217391      .0422749   .0215002
                  |
               x4 |    .495098    .4347826      .2505902   .2484472
               x5 |   26.56863    25.46739      34.50142   29.63629
               x6 |   13.15931    11.86957      5.195687   2.576206
               x7 |   6.696078    6.858696      10.90495   12.65014
              x90 |   -.048508    .0972024      .9792937   .9097065
              x91 |  -.0077434   -.0890157      1.011341   .8891627
              x92 |  -.0227801    .0453787      1.013567    1.10497
              x93 |   .0403853    .0865687      .9793358   .8741716
              x94 |   .0160559   -.1299173      .9846065   .8552718
              x95 |  -.0658282   -.0807251      1.008285   .8354051
  -----------------------------------------------------------------
. psweight ipw `treatvar' `varlist' if `tousevar' , atet averagevariance `depvaropt'



initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.207512
        1.x2 |  -1.628789
        1.x3 |  -.5805311
          x4 |  -.2831152
          x5 |   .0545179
          x6 |  -.2844592
          x7 |   .0238709
         x90 |   .1439493
         x91 |  -.1331182
         x92 |   .1277526
         x93 |   .0623585
         x94 |  -.1663353
         x95 |   .0177759
       _cons |   1.379537
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff     sd_avg  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4719208  -.0045295  -.0090456   .5007475   1.007399
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0098847   .0009849   .0096855   .1016872   1.107894
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0214054   .0003337   .0022894   .1457719   1.023886
             |
          x4 |  .4347826    .445852  -.0110694  -.0222252   .4980573   1.003118
          x5 |  25.46739   25.27307   .1943234   .0308606   6.296806    .596745
          x6 |  11.86957   11.68981   .1797533    .095155   1.889059   .5648485
          x7 |  6.858696   6.711046   .1476494    .042865   3.444517   1.141787
         x90 |  .0972024   .0841522   .0130502   .0130107   1.003034   .8251709
         x91 | -.0890157  -.0615794  -.0274362  -.0288473   .9510857   .9665176
         x92 |  .0453787   .0341522   .0112265   .0110442   1.016508   1.149085
         x93 |  .0865687   .0948113  -.0082427   -.008758   .9411576   .9741335
         x94 | -.1299173  -.1857505   .0558332   .0562053   .9933797   .7647728
         x95 | -.0807251  -.0974964   .0167713   .0178362   .9402985   .8954759
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.01616
  Mean absolute standardized diff.    = 0.02676
  Maximum absolute standardized diff. = 0.09515
  C.V. of matching weights:           = 1.04145
  S.D. of matching weights:           = 1.04145
  Skewness of matching weights:       = 0.13348
  Kurtosis of matching weights:       = 0.03590
  Maximum matching weight:            = 9.28896
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.454     3417.895   6.559178   .0395688   3417.895
   y1_binary |    .9470413     .9465176   .0005237   .0095404   .9465176
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight ipw `treatvar' `varlist' if `tousevar' , atet averagevariance `depvaropt'



initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.207512
        1.x2 |  -1.628789
        1.x3 |  -.5805311
          x4 |  -.2831152
          x5 |   .0545179
          x6 |  -.2844592
          x7 |   .0238709
         x90 |   .1439493
         x91 |  -.1331182
         x92 |   .1277526
         x93 |   .0623585
         x94 |  -.1663353
         x95 |   .0177759
       _cons |   1.379537
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff     sd_avg  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4719208  -.0045295  -.0090456   .5007475   1.007399
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0098847   .0009849   .0096855   .1016872   1.107894
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0214054   .0003337   .0022894   .1457719   1.023886
             |
          x4 |  .4347826    .445852  -.0110694  -.0222252   .4980573   1.003118
          x5 |  25.46739   25.27307   .1943234   .0308606   6.296806    .596745
          x6 |  11.86957   11.68981   .1797533    .095155   1.889059   .5648485
          x7 |  6.858696   6.711046   .1476494    .042865   3.444517   1.141787
         x90 |  .0972024   .0841522   .0130502   .0130107   1.003034   .8251709
         x91 | -.0890157  -.0615794  -.0274362  -.0288473   .9510857   .9665176
         x92 |  .0453787   .0341522   .0112265   .0110442   1.016508   1.149085
         x93 |  .0865687   .0948113  -.0082427   -.008758   .9411576   .9741335
         x94 | -.1299173  -.1857505   .0558332   .0562053   .9933797   .7647728
         x95 | -.0807251  -.0974964   .0167713   .0178362   .9402985   .8954759
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.01616
  Mean absolute standardized diff.    = 0.02676
  Maximum absolute standardized diff. = 0.09515
  C.V. of matching weights:           = 1.04145
  S.D. of matching weights:           = 1.04145
  Skewness of matching weights:       = 0.13348
  Kurtosis of matching weights:       = 0.03590
  Maximum matching weight:            = 9.28896
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.454     3417.895   6.559178   .0395688   3417.895
   y1_binary |    .9470413     .9465176   .0005237   .0095404   .9465176
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' , ate aequations

Iteration 0:   EE criterion =  5.570e-18  
Iteration 1:   EE criterion =  2.096e-25  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATE                     |
                  treat |
(Treated vs Untreated)  |   -328.878   82.21905    -4.00   0.000    -490.0244   -167.7316
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
             Untreated  |   3452.527   28.58753   120.77   0.000     3396.497    3508.558
------------------------+----------------------------------------------------------------
TME1                    |
                     x1 |  -1.207512   .3268258    -3.69   0.000    -1.848079   -.5669452
                        |
                     x2 |
                     1  |  -1.628792   1.054719    -1.54   0.123    -3.696005    .4384199
                        |
                     x3 |
                     1  |  -.5805318   .8259794    -0.70   0.482    -2.199422    1.038358
                     x4 |  -.2831153   .2838113    -1.00   0.318    -.8393752    .2731445
                     x5 |   .0545179   .0270259     2.02   0.044     .0015481    .1074878
                     x6 |  -.2844593   .0688093    -4.13   0.000     -.419323   -.1495955
                     x7 |    .023871   .0390129     0.61   0.541    -.0525929    .1003349
                    x90 |   .1439494   .1292697     1.11   0.265    -.1094145    .3973133
                    x91 |  -.1331182   .1248073    -1.07   0.286    -.3777361    .1114997
                    x92 |   .1277527    .133834     0.95   0.340    -.1345572    .3900625
                    x93 |   .0623585   .1243317     0.50   0.616    -.1813271    .3060441
                    x94 |  -.1663354   .1194682    -1.39   0.164    -.4004887    .0678179
                    x95 |    .017776   .1254901     0.14   0.887    -.2281801     .263732
                  _cons |   1.379538   .9297905     1.48   0.138    -.4428177    3.201894
-----------------------------------------------------------------------------------------
. psweight ipw `treatvar' `varlist' if `tousevar' , ate pooledvariance



initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.207512
        1.x2 |  -1.628789
        1.x3 |  -.5805311
          x4 |  -.2831152
          x5 |   .0545179
          x6 |  -.2844592
          x7 |   .0238709
         x90 |   .1439493
         x91 |  -.1331182
         x92 |   .1277526
         x93 |   .0623585
         x94 |  -.1663353
         x95 |   .0177759
       _cons |   1.379537
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6643106   .6980937  -.0337831  -.0730952   .4621798   1.067096
             |
          x2 |
          0  |  (empty)
          1  |  .0126474   .0237734   -.011126  -.0762399    .145934   .5426396
             |
          x3 |
          0  |  (empty)
          1  |  .0252967   .0398782  -.0145815  -.0769757   .1894293   .6494649
             |
          x4 |  .5035684   .4859058   .0176626   .0352982    .500383   1.009262
          x5 |  25.88638    26.3268  -.4404207  -.0736253    5.98192   .7436049
          x6 |  12.40345   12.88502  -.4815643  -.2146119   2.243884   .5994444
          x7 |  6.783391   6.698872   .0845182   .0251498    3.36059   1.188955
         x90 | -.1279394  -.0237456  -.1041937  -.1022979   1.018533   1.179133
         x91 |  .0259183  -.0177924   .0437107   .0442269   .9883275   .9105384
         x92 |  .0197006  -.0121531   .0318537   .0312437   1.019527   1.201641
         x93 |  .0303493   .0505445  -.0201952  -.0208152   .9702151   .8788976
         x94 |  -.142924  -.0216133  -.1213108  -.1226343   .9892079   .7980325
         x95 | -.0930146  -.0717394  -.0212752  -.0217631   .9775833   .7971968
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.04970
  Mean absolute standardized diff.    = 0.07061
  Maximum absolute standardized diff. = 0.21461
  C.V. of matching weights:           = 0.33373
  S.D. of matching weights:           = 0.33373
  Skewness of matching weights:       = 0.18431
  Kurtosis of matching weights:       = 0.08385
  Maximum matching weight:            = 4.89817
. 
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' , atet aequations tlevel(0) control(1)

Iteration 0:   EE criterion =  5.570e-18  
Iteration 1:   EE criterion =  3.326e-26  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATET                    |
                  treat |
(Untreated vs Treated)  |     319.07   91.15096     3.50   0.000     140.4174    497.7225
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
               Treated  |   3141.406   87.28586    35.99   0.000     2970.328    3312.483
------------------------+----------------------------------------------------------------
TME0                    |
                     x1 |   1.207512   .3268258     3.69   0.000     .5669452    1.848079
                        |
                     x2 |
                     1  |   1.628792   1.054719     1.54   0.123    -.4384199    3.696005
                        |
                     x3 |
                     1  |   .5805318   .8259794     0.70   0.482    -1.038358    2.199422
                     x4 |   .2831153   .2838113     1.00   0.318    -.2731445    .8393752
                     x5 |  -.0545179   .0270259    -2.02   0.044    -.1074878   -.0015481
                     x6 |   .2844593   .0688093     4.13   0.000     .1495955     .419323
                     x7 |   -.023871   .0390129    -0.61   0.541    -.1003349    .0525929
                    x90 |  -.1439494   .1292697    -1.11   0.265    -.3973133    .1094145
                    x91 |   .1331182   .1248073     1.07   0.286    -.1114997    .3777361
                    x92 |  -.1277527    .133834    -0.95   0.340    -.3900625    .1345572
                    x93 |  -.0623585   .1243317    -0.50   0.616    -.3060441    .1813271
                    x94 |   .1663354   .1194682     1.39   0.164    -.0678179    .4004887
                    x95 |   -.017776   .1254901    -0.14   0.887     -.263732    .2281801
                  _cons |  -1.379538   .9297905    -1.48   0.138    -3.201894    .4428177
-----------------------------------------------------------------------------------------
. psweight ipw `treatvar' `varlist' if `tousevar' , ateu pooledvariance



initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.207512
        1.x2 |  -1.628789
        1.x3 |  -.5805311
          x4 |  -.2831152
          x5 |   .0545179
          x6 |  -.2844592
          x7 |   .0238709
         x90 |   .1439493
         x91 |  -.1331182
         x92 |   .1277526
         x93 |   .0623585
         x94 |  -.1663353
         x95 |   .0177759
       _cons |   1.379537
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .7133644        .75  -.0366356  -.0837821   .4372727   1.099818
             |
          x2 |
          0  |  (empty)
          1  |  .0130902   .0269608  -.0138706  -.0897954   .1544686   .4966403
             |
          x3 |
          0  |  (empty)
          1  |  .0261829   .0441176  -.0179347  -.0905493   .1980657   .6097609
             |
          x4 |  .5207033    .495098   .0256053   .0511594   .5005007   1.006879
          x5 |  25.99075   26.56863   -.577878  -.1002906   5.762036   .7963305
          x6 |  12.53645   13.15931  -.6228673  -.2813566     2.2138   .6382822
          x7 |  6.764632   6.696078   .0685532   .0204092   3.358927   1.200431
         x90 | -.1840235   -.048508  -.1355155  -.1337092   1.013509   1.263776
         x91 |   .054549  -.0077434   .0622924   .0625862   .9953062   .8955527
         x92 |   .013304  -.0227801   .0360842   .0351881   1.025465    1.21557
         x93 |  .0163448   .0403853  -.0240406  -.0246383   .9757395    .857822
         x94 | -.1461641   .0160559  -.1622201  -.1661874    .976127   .8119355
         x95 |  -.096076  -.0658282  -.0302478  -.0307892   .9824155   .7755988
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.06398
  Mean absolute standardized diff.    = 0.09003
  Maximum absolute standardized diff. = 0.28136
  C.V. of matching weights:           = 0.83016
  S.D. of matching weights:           = 0.83016
  Skewness of matching weights:       = 0.26806
  Kurtosis of matching weights:       = 0.15504
  Maximum matching weight:            = 5.86923
. 
. // tradeoff between CBPS-like balance and variance in weights
. psweight cbps `treatvar' `varlist' if `tousevar' , atet treatvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  7.881e-09  
Iteration 1:   f(p) =  7.799e-09  (backed up)
Iteration 2:   f(p) =  7.301e-09  
Iteration 3:   f(p) =  5.045e-09  
Iteration 4:   f(p) =  4.162e-09  
Iteration 5:   f(p) =  3.700e-09  
Iteration 6:   f(p) =  3.063e-09  
Iteration 7:   f(p) =  2.655e-09  
Iteration 8:   f(p) =  2.353e-09  
Iteration 9:   f(p) =  2.232e-09  
Iteration 10:  f(p) =  1.928e-09  
Iteration 11:  f(p) =  1.687e-09  
Iteration 12:  f(p) =  1.155e-09  
Iteration 13:  f(p) =  8.603e-10  
Iteration 14:  f(p) =  7.496e-10  
Iteration 15:  f(p) =  4.771e-10  
Iteration 16:  f(p) =  2.778e-10  
Iteration 17:  f(p) =  7.348e-11  
Iteration 18:  f(p) =  4.499e-11  
Iteration 19:  f(p) =  4.379e-11  
Iteration 20:  f(p) =  3.501e-11  
Iteration 21:  f(p) =  2.719e-11  
Iteration 22:  f(p) =  5.991e-12  
Iteration 23:  f(p) =  1.225e-12  
Iteration 24:  f(p) =  1.153e-12  
Iteration 25:  f(p) =  1.081e-12  
Iteration 26:  f(p) =  8.074e-13  
Iteration 27:  f(p) =  5.560e-13  
Iteration 28:  f(p) =  1.140e-13  
Iteration 29:  f(p) =  2.312e-15  
Iteration 30:  f(p) =  4.524e-18  
Iteration 31:  f(p) =  2.979e-20  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.339291
        1.x2 |  -1.525175
        1.x3 |  -.5996277
          x4 |  -.3183657
          x5 |   .0587884
          x6 |  -.2435675
          x7 |   .0341033
         x90 |    .158599
         x91 |   -.161762
         x92 |   .1391156
         x93 |   .0571151
         x94 |  -.1175052
         x95 |   .0115051
       _cons |   .7828573
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4673913   3.89e-08   7.76e-08   .5016695   1.008511
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0108696  -6.52e-09  -6.25e-08   .1042572    1.00851
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0217391  -4.28e-09  -2.92e-08   .1466296   1.008511
             |
          x4 |  .4347826   .4347826   3.07e-09   6.15e-09   .4984448   1.008511
          x5 |  25.46739   25.46739  -3.12e-07  -5.73e-08   5.443922   .6195799
          x6 |  11.86957   11.86957  -9.83e-08  -6.12e-08   1.605057   .5669465
          x7 |  6.858696   6.858695   1.84e-07   5.18e-08   3.556704   1.145237
         x90 |  .0972024   .0972025  -2.95e-08  -3.09e-08   .9537854    .845302
         x91 | -.0890157  -.0890157   6.46e-09   6.85e-09   .9429542   .9654928
         x92 |  .0453787   .0453787  -3.77e-08  -3.59e-08   1.051175   1.136731
         x93 |  .0865687   .0865687  -2.71e-08  -2.90e-08   .9349714   .9577068
         x94 | -.1299173  -.1299173   1.47e-08   1.59e-08   .9248091   .7795321
         x95 | -.0807251   -.080725  -9.60e-08  -1.05e-07    .914005   .8888006
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00000
  C.V. of matching weights:           = 0.98844
  S.D. of matching weights:           = 0.98844
  Skewness of matching weights:       = 0.11001
  Kurtosis of matching weights:       = 0.02254
  Maximum matching weight:            = 7.03226
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.753     3424.753  -2.51e-06  -1.64e-08   3424.753
   y1_binary |    .9470393     .9470393  -3.24e-09  -6.17e-08   .9470393
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight pcbps `treatvar' `varlist' if `tousevar' , atet treatvariance cvtarget(1 .75 6) `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00061284  
Iteration 1:   f(p) =  2.181e-07  
Iteration 2:   f(p) =  1.269e-07  
Iteration 3:   f(p) =  1.206e-07  
Iteration 4:   f(p) =  1.176e-07  
Iteration 5:   f(p) =  1.171e-07  
Iteration 6:   f(p) =  1.170e-07  
Iteration 7:   f(p) =  1.162e-07  
Iteration 8:   f(p) =  9.130e-08  
Iteration 9:   f(p) =  8.526e-08  
Iteration 10:  f(p) =  8.388e-08  
Iteration 11:  f(p) =  8.318e-08  
Iteration 12:  f(p) =  8.257e-08  
Iteration 13:  f(p) =  8.210e-08  
Iteration 14:  f(p) =  8.209e-08  
Iteration 15:  f(p) =  8.208e-08  
Iteration 16:  f(p) =  8.208e-08  
Iteration 17:  f(p) =  8.208e-08  
Iteration 18:  f(p) =  8.207e-08  
Iteration 19:  f(p) =  8.202e-08  
Iteration 20:  f(p) =  8.127e-08  
Iteration 21:  f(p) =  7.781e-08  
Iteration 22:  f(p) =  7.609e-08  
Iteration 23:  f(p) =  7.606e-08  
Iteration 24:  f(p) =  7.603e-08  
Iteration 25:  f(p) =  7.602e-08  
Iteration 26:  f(p) =  7.602e-08  
Iteration 27:  f(p) =  7.602e-08  
Iteration 28:  f(p) =  7.602e-08  
Iteration 29:  f(p) =  7.577e-08  
Iteration 30:  f(p) =  7.397e-08  
Iteration 31:  f(p) =  6.623e-08  
Iteration 32:  f(p) =  5.118e-08  
Iteration 33:  f(p) =  4.905e-08  
Iteration 34:  f(p) =  4.879e-08  
Iteration 35:  f(p) =  4.855e-08  
Iteration 36:  f(p) =  4.806e-08  
Iteration 37:  f(p) =  4.805e-08  
Iteration 38:  f(p) =  4.803e-08  
Iteration 39:  f(p) =  4.803e-08  
Iteration 40:  f(p) =  4.803e-08  
Iteration 41:  f(p) =  4.803e-08  
Iteration 42:  f(p) =  4.798e-08  
Iteration 43:  f(p) =  4.737e-08  
Iteration 44:  f(p) =  4.064e-08  
Iteration 45:  f(p) =  3.545e-08  
Iteration 46:  f(p) =  3.429e-08  
Iteration 47:  f(p) =  3.417e-08  
Iteration 48:  f(p) =  3.414e-08  
Iteration 49:  f(p) =  3.414e-08  
Iteration 50:  f(p) =  3.414e-08  
Iteration 51:  f(p) =  3.414e-08  
Iteration 52:  f(p) =  3.413e-08  
Iteration 53:  f(p) =  3.322e-08  
Iteration 54:  f(p) =  2.891e-08  
Iteration 55:  f(p) =  2.766e-08  
Iteration 56:  f(p) =  2.757e-08  
Iteration 57:  f(p) =  2.755e-08  
Iteration 58:  f(p) =  2.755e-08  
Iteration 59:  f(p) =  2.755e-08  
Iteration 60:  f(p) =  2.755e-08  
Iteration 61:  f(p) =  2.755e-08  
Iteration 62:  f(p) =  2.755e-08  
Iteration 63:  f(p) =  2.748e-08  
Iteration 64:  f(p) =  2.491e-08  
Iteration 65:  f(p) =  1.808e-08  
Iteration 66:  f(p) =  1.748e-08  
Iteration 67:  f(p) =  1.727e-08  
Iteration 68:  f(p) =  1.720e-08  
Iteration 69:  f(p) =  1.719e-08  
Iteration 70:  f(p) =  1.719e-08  
Iteration 71:  f(p) =  1.719e-08  
Iteration 72:  f(p) =  1.719e-08  
Iteration 73:  f(p) =  1.719e-08  
Iteration 74:  f(p) =  1.716e-08  
Iteration 75:  f(p) =  1.679e-08  
Iteration 76:  f(p) =  1.497e-08  
Iteration 77:  f(p) =  1.399e-08  
Iteration 78:  f(p) =  1.393e-08  
Iteration 79:  f(p) =  1.393e-08  
Iteration 80:  f(p) =  1.393e-08  
Iteration 81:  f(p) =  1.393e-08  
Iteration 82:  f(p) =  1.393e-08  
Iteration 83:  f(p) =  1.392e-08  
Iteration 84:  f(p) =  1.384e-08  
Iteration 85:  f(p) =  1.313e-08  
Iteration 86:  f(p) =  1.217e-08  
Iteration 87:  f(p) =  1.213e-08  
Iteration 88:  f(p) =  1.213e-08  
Iteration 89:  f(p) =  1.213e-08  
Iteration 90:  f(p) =  1.213e-08  
Iteration 91:  f(p) =  1.213e-08  
Iteration 92:  f(p) =  1.213e-08  
Iteration 93:  f(p) =  1.213e-08  
Iteration 94:  f(p) =  1.209e-08  
Iteration 95:  f(p) =  1.190e-08  
Iteration 96:  f(p) =  1.179e-08  
Iteration 97:  f(p) =  1.179e-08  
Iteration 98:  f(p) =  1.179e-08  
Iteration 99:  f(p) =  1.179e-08  
Iteration 100: f(p) =  1.179e-08  
Iteration 101: f(p) =  1.179e-08  
Iteration 102: f(p) =  1.178e-08  
Iteration 103: f(p) =  1.176e-08  
Iteration 104: f(p) =  1.176e-08  
Iteration 105: f(p) =  1.176e-08  
Iteration 106: f(p) =  1.176e-08  
Iteration 107: f(p) =  1.176e-08  
Iteration 108: f(p) =  1.176e-08  
Iteration 109: f(p) =  1.172e-08  
Iteration 110: f(p) =  1.154e-08  
Iteration 111: f(p) =  1.150e-08  
Iteration 112: f(p) =  1.150e-08  
Iteration 113: f(p) =  1.150e-08  
Iteration 114: f(p) =  1.150e-08  
Iteration 115: f(p) =  1.150e-08  
Iteration 116: f(p) =  1.150e-08  
Iteration 117: f(p) =  1.150e-08  
Iteration 118: f(p) =  1.149e-08  
Iteration 119: f(p) =  1.149e-08  
Iteration 120: f(p) =  1.149e-08  
convergence not achieved

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_cv()-.75)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |   -1.07333
        1.x2 |  -1.351472
        1.x3 |  -.4265912
          x4 |   -.244603
          x5 |   .0448657
          x6 |  -.1991249
          x7 |   .0257599
         x90 |   .1234973
         x91 |  -.1268363
         x92 |   .1003826
         x93 |   .0481983
         x94 |  -.0952637
         x95 |  -.0004235
       _cons |   .4475064
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5180966  -.0507053   -.101073   .5016695   1.005539
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0121062  -.0012367  -.0118617   .1042572   .9066242
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0254794  -.0037403  -.0255082   .1466296   .8637689
             |
          x4 |  .4347826    .452333  -.0175504  -.0352103   .4984448   1.000446
          x5 |  25.46739   25.54247  -.0750754  -.0137907   5.443922   .6518659
          x6 |  11.86957   12.06722   -.197658   -.123147   1.605057   .5446776
          x7 |  6.858696   6.811875   .0468205    .013164   3.556704     1.1459
         x90 |  .0972024   .0716298   .0255726   .0268117   .9537854    .860834
         x91 | -.0890157  -.0738475  -.0151682  -.0160858   .9429542   .9390514
         x92 |  .0453787   .0264283   .0189504   .0180278   1.051175   1.126358
         x93 |  .0865687   .0773356   .0092331   .0098753   .9349714   .9358198
         x94 | -.1299173  -.0966886  -.0332287  -.0359303   .9248091   .7978087
         x95 | -.0807251  -.0892452   .0085201   .0093218    .914005   .8757034
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.02195
  Mean absolute standardized diff.    = 0.03383
  Maximum absolute standardized diff. = 0.12315
  C.V. of matching weights:           = 0.77806
  S.D. of matching weights:           = 0.77806
  Skewness of matching weights:       = 0.08657
  Kurtosis of matching weights:       = 0.01554
  Maximum matching weight:            = 4.98511
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3425.512     3432.648  -7.136045  -.0489948   3432.648
   y1_binary |    .9471373     .9496062  -.0024689  -.0513141   .9496062
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight cbps `treatvar' `varlist' if `tousevar' , atet treatvariance cvtarget(1 .50 6) `depvaropt' // could say pcbps or cbps



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .02519574  
Iteration 1:   f(p) =  .00037232  
Iteration 2:   f(p) =  .00018115  
Iteration 3:   f(p) =  .00007047  
Iteration 4:   f(p) =  .00006335  
Iteration 5:   f(p) =  .00005995  
Iteration 6:   f(p) =  .00003158  
Iteration 7:   f(p) =  .00001706  
Iteration 8:   f(p) =  .00001448  
Iteration 9:   f(p) =  .00001017  
Iteration 10:  f(p) =  9.753e-06  
Iteration 11:  f(p) =  9.539e-06  
Iteration 12:  f(p) =  9.502e-06  
Iteration 13:  f(p) =  9.419e-06  
Iteration 14:  f(p) =  8.001e-06  
Iteration 15:  f(p) =  7.194e-06  
Iteration 16:  f(p) =  7.087e-06  
Iteration 17:  f(p) =  4.162e-06  
Iteration 18:  f(p) =  3.070e-06  
Iteration 19:  f(p) =  1.739e-06  
Iteration 20:  f(p) =  1.473e-06  
Iteration 21:  f(p) =  1.378e-06  
Iteration 22:  f(p) =  1.336e-06  
Iteration 23:  f(p) =  1.285e-06  
Iteration 24:  f(p) =  1.276e-06  
Iteration 25:  f(p) =  1.266e-06  
Iteration 26:  f(p) =  1.263e-06  
Iteration 27:  f(p) =  1.263e-06  
Iteration 28:  f(p) =  1.256e-06  
Iteration 29:  f(p) =  5.921e-07  
Iteration 30:  f(p) =  1.752e-07  
Iteration 31:  f(p) =  1.175e-07  
Iteration 32:  f(p) =  1.120e-07  
Iteration 33:  f(p) =  1.006e-07  
Iteration 34:  f(p) =  9.477e-08  
Iteration 35:  f(p) =  9.368e-08  
Iteration 36:  f(p) =  9.189e-08  
Iteration 37:  f(p) =  8.919e-08  
Iteration 38:  f(p) =  8.591e-08  
Iteration 39:  f(p) =  8.512e-08  
Iteration 40:  f(p) =  8.467e-08  
Iteration 41:  f(p) =  8.375e-08  
Iteration 42:  f(p) =  8.084e-08  
Iteration 43:  f(p) =  7.990e-08  
Iteration 44:  f(p) =  7.982e-08  
Iteration 45:  f(p) =  7.980e-08  
Iteration 46:  f(p) =  7.979e-08  
Iteration 47:  f(p) =  7.977e-08  
Iteration 48:  f(p) =  7.975e-08  
Iteration 49:  f(p) =  7.975e-08  
Iteration 50:  f(p) =  7.975e-08  
Iteration 51:  f(p) =  7.975e-08  
Iteration 52:  f(p) =  7.975e-08  
Iteration 53:  f(p) =  7.966e-08  
Iteration 54:  f(p) =  7.778e-08  
Iteration 55:  f(p) =  7.693e-08  
Iteration 56:  f(p) =  7.688e-08  
Iteration 57:  f(p) =  7.688e-08  
Iteration 58:  f(p) =  7.688e-08  
Iteration 59:  f(p) =  7.688e-08  
Iteration 60:  f(p) =  7.688e-08  
Iteration 61:  f(p) =  7.688e-08  
Iteration 62:  f(p) =  7.588e-08  
Iteration 63:  f(p) =  7.265e-08  
Iteration 64:  f(p) =  7.261e-08  
Iteration 65:  f(p) =  7.261e-08  
Iteration 66:  f(p) =  7.261e-08  
Iteration 67:  f(p) =  7.261e-08  
Iteration 68:  f(p) =  7.261e-08  
Iteration 69:  f(p) =  7.260e-08  
Iteration 70:  f(p) =  7.246e-08  
Iteration 71:  f(p) =  6.319e-08  
Iteration 72:  f(p) =  5.563e-08  
Iteration 73:  f(p) =  5.446e-08  
Iteration 74:  f(p) =  5.432e-08  
Iteration 75:  f(p) =  5.389e-08  
Iteration 76:  f(p) =  5.385e-08  
Iteration 77:  f(p) =  5.385e-08  
Iteration 78:  f(p) =  5.385e-08  
Iteration 79:  f(p) =  5.385e-08  
Iteration 80:  f(p) =  5.385e-08  
Iteration 81:  f(p) =  5.385e-08  
Iteration 82:  f(p) =  5.370e-08  
Iteration 83:  f(p) =  5.311e-08  
Iteration 84:  f(p) =  5.293e-08  
Iteration 85:  f(p) =  5.292e-08  
Iteration 86:  f(p) =  5.292e-08  
Iteration 87:  f(p) =  5.292e-08  
Iteration 88:  f(p) =  5.292e-08  
Iteration 89:  f(p) =  5.292e-08  
Iteration 90:  f(p) =  5.292e-08  
Iteration 91:  f(p) =  5.266e-08  
Iteration 92:  f(p) =  5.226e-08  
Iteration 93:  f(p) =  5.216e-08  
Iteration 94:  f(p) =  5.216e-08  
Iteration 95:  f(p) =  5.215e-08  
Iteration 96:  f(p) =  5.215e-08  
Iteration 97:  f(p) =  5.215e-08  
Iteration 98:  f(p) =  5.215e-08  
Iteration 99:  f(p) =  5.215e-08  
Iteration 100: f(p) =  5.215e-08  
Iteration 101: f(p) =  5.213e-08  
Iteration 102: f(p) =  5.211e-08  
Iteration 103: f(p) =  5.211e-08  
Iteration 104: f(p) =  5.211e-08  
Iteration 105: f(p) =  5.211e-08  
Iteration 106: f(p) =  5.211e-08  
Iteration 107: f(p) =  5.211e-08  
Iteration 108: f(p) =  5.209e-08  
Iteration 109: f(p) =  5.193e-08  
Iteration 110: f(p) =  5.141e-08  
Iteration 111: f(p) =  5.138e-08  
Iteration 112: f(p) =  5.137e-08  
Iteration 113: f(p) =  5.137e-08  
Iteration 114: f(p) =  5.137e-08  
Iteration 115: f(p) =  5.137e-08  
Iteration 116: f(p) =  5.137e-08  
Iteration 117: f(p) =  5.137e-08  
Iteration 118: f(p) =  5.129e-08  
Iteration 119: f(p) =  5.124e-08  
Iteration 120: f(p) =  5.124e-08  
convergence not achieved

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_cv()-.5)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -.7226307
        1.x2 |  -1.021571
        1.x3 |  -.2938909
          x4 |  -.1692576
          x5 |   .0287793
          x6 |  -.1460569
          x7 |   .0166207
         x90 |   .0850044
         x91 |  -.0878086
         x92 |   .0645462
         x93 |   .0347713
         x94 |  -.0666829
         x95 |  -.0074579
       _cons |  -.0759752
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5905789  -.1231876  -.2455552   .5016695   1.038297
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0146765  -.0038069  -.0365148   .1042572   .7497997
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0298447  -.0081056  -.0552792   .1466296   .7407455
             |
          x4 |  .4347826   .4667906   -.032008  -.0642157   .4984448   .9957458
          x5 |  25.46739   25.76612  -.2987265  -.0548734   5.443922   .6999836
          x6 |  11.86957   12.34486  -.4752949  -.2961234   1.605057   .5219989
          x7 |  6.858696   6.763013   .0956828   .0269021   3.556704   1.148802
         x90 |  .0972024   .0377604    .059442   .0623222   .9537854   .8843603
         x91 | -.0890157  -.0569755  -.0320401  -.0339785   .9429542   .9109668
         x92 |  .0453787   .0106628   .0347159   .0330258   1.051175   1.115475
         x93 |  .0865687   .0662083   .0203604   .0217765   .9349714   .9142883
         x94 | -.1299173  -.0576346  -.0722826  -.0781595   .9248091   .8187136
         x95 | -.0807251  -.0932106   .0124855   .0136602    .914005   .8621468
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.05439
  Mean absolute standardized diff.    = 0.07865
  Maximum absolute standardized diff. = 0.29612
  C.V. of matching weights:           = 0.53216
  S.D. of matching weights:           = 0.53216
  Skewness of matching weights:       = 0.06303
  Kurtosis of matching weights:       = 0.01078
  Maximum matching weight:            = 3.26700
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3428.447     3442.437  -13.98998  -.1013739   3442.437
   y1_binary |    .9474508     .9529096  -.0054588   -.123991   .9529096
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' , atet treatvariance cvtarget(1 .75 6) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00093921  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00042753  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .00003686  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00002767  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  .00001518  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  6.684e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  3.117e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  1.306e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  3.890e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  1.978e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  7.502e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  5.838e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =  4.673e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =  4.256e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  3.975e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  3.921e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  3.899e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  3.886e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  1.874e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  4.987e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  3.855e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  1.410e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 22:  f(p) =  1.103e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 23:  f(p) =  4.933e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 24:  f(p) =  2.121e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 25:  f(p) =  4.549e-12  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 26:  f(p) =  3.744e-12  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = mean(stddiff())^2 + 1*abs(wgt_cv()-.75)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.157812
        1.x2 |  -1.628478
        1.x3 |  -.5815967
          x4 |  -.2653751
          x5 |   .0168022
          x6 |  -.0907795
          x7 |  -.0399397
         x90 |   .0794852
         x91 |  -.1371257
         x92 |   .0796684
         x93 |    .011234
         x94 |  -.1212317
         x95 |   -.005093
       _cons |   1.407528
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4928957  -.0255044   -.050839   .5016695   1.004424
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0090063   .0018632   .0178715   .1042572   1.214864
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0196868   .0020524    .013997   .1466296   1.111318
             |
          x4 |  .4347826   .4802928  -.0455102  -.0913045   .4984448   .9928955
          x5 |  25.46739   24.92936   .5380282    .098831   5.443922   .7310258
          x6 |  11.86957   12.32283  -.4532635  -.2823972   1.605057   .5276966
          x7 |  6.858696   6.111669   .7470267   .2100334   3.556704   1.139063
         x90 |  .0972024   .0700162   .0271862   .0285035   .9537854   .8431786
         x91 | -.0890157  -.0924172   .0034015   .0036072   .9429542   .9346783
         x92 |  .0453787   .0468007   -.001422  -.0013528   1.051175    1.10716
         x93 |  .0865687   .0531096    .033459   .0357862   .9349714    .945511
         x94 | -.1299173  -.1372257   .0073085   .0079027   .9248091   .8218585
         x95 | -.0807251  -.0892763   .0085512   .0093557    .914005   .8758172
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.06552
  Maximum absolute standardized diff. = 0.28240
  C.V. of matching weights:           = 0.76237
  S.D. of matching weights:           = 0.76237
  Skewness of matching weights:       = 0.08898
  Kurtosis of matching weights:       = 0.01518
  Maximum matching weight:            = 4.36838
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3429.472     3448.684  -19.21208  -.1374035   3448.684
   y1_binary |    .9478635     .9598882  -.0120247    -.27962   .9598882
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' , atet treatvariance cvtarget(1 .50 6) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .02552212  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00707056  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .00121893  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00077435  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  .00038439  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  .00027065  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  .00020657  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  .00014905  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  .00004814  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  .00002729  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  .00002254  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  .00001783  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =  .00001699  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =  .00001552  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  .00001133  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  9.051e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  2.973e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  1.259e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  3.587e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  2.820e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  2.549e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  2.405e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 22:  f(p) =  2.405e-07  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = mean(stddiff())^2 + 1*abs(wgt_cv()-.5)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -.9085429
        1.x2 |  -1.631077
        1.x3 |  -.5939907
          x4 |  -.2062834
          x5 |   .0070789
          x6 |  -.0147575
          x7 |  -.0218454
         x90 |  -.1062243
         x91 |  -.1768685
         x92 |  -.1217832
         x93 |  -.1089368
         x94 |  -.0973994
         x95 |  -.1704236
       _cons |   1.387936
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5840826  -.1166913  -.2326059   .5016695   1.033447
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0079292   .0029404   .0282029   .1042572   1.378396
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0183869   .0033523    .022862   .1466296   1.188308
             |
          x4 |  .4347826   .4910182  -.0562356  -.1128222   .4984448   .9916731
          x5 |  25.46739   25.59359   -.126196  -.0231811   5.443922   .7624203
          x6 |  11.86957   12.69649  -.8269223  -.5151983   1.605057   .5002755
          x7 |  6.858696   6.437549   .4211462   .1184091   3.556704   1.124491
         x90 |  .0972024   -.115456   .2126584   .2229626   .9537854   .8834512
         x91 | -.0890157  -.1376601   .0486444   .0515872   .9429542   .9514391
         x92 |  .0453787  -.1360412   .1814199   .1725877   1.051175   1.109791
         x93 |  .0865687  -.0625336   .1491022   .1594725   .9349714   .8394674
         x94 | -.1299173  -.1051612   -.024756  -.0267688   .9248091   .8321243
         x95 | -.0807251     -.2024   .1216749   .1331228    .914005   .8585956
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00011
  Mean absolute standardized diff.    = 0.13998
  Maximum absolute standardized diff. = 0.51520
  C.V. of matching weights:           = 0.57824
  S.D. of matching weights:           = 0.57824
  Skewness of matching weights:       = 0.07897
  Kurtosis of matching weights:       = 0.01494
  Maximum matching weight:            = 3.65433
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3438.113     3477.176  -39.06351  -.2530095   3477.176
   y1_binary |    .9474339     .9606989  -.0132651  -.3149738   .9606989
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight cbpsoid `treatvar' `varlist' if `tousevar' , atet treatvariance cvtarget(1 .75 6) `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00061301  
Iteration 1:   f(p) =  .00010314  
Iteration 2:   f(p) =  .00006546  
Iteration 3:   f(p) =  .00002385  
Iteration 4:   f(p) =  .00001692  
Iteration 5:   f(p) =  .00001277  
Iteration 6:   f(p) =  .00001168  
Iteration 7:   f(p) =  .00001092  
Iteration 8:   f(p) =  8.593e-06  
Iteration 9:   f(p) =  5.348e-06  
Iteration 10:  f(p) =  4.602e-06  
Iteration 11:  f(p) =  4.427e-06  
Iteration 12:  f(p) =  4.385e-06  
Iteration 13:  f(p) =  4.337e-06  
Iteration 14:  f(p) =  4.214e-06  
Iteration 15:  f(p) =  1.875e-06  
Iteration 16:  f(p) =  9.107e-07  
Iteration 17:  f(p) =  7.463e-07  
Iteration 18:  f(p) =  7.266e-07  
Iteration 19:  f(p) =  7.201e-07  
Iteration 20:  f(p) =  7.166e-07  
Iteration 21:  f(p) =  7.162e-07  
Iteration 22:  f(p) =  7.158e-07  
Iteration 23:  f(p) =  7.154e-07  
Iteration 24:  f(p) =  7.063e-07  
Iteration 25:  f(p) =  4.018e-07  
Iteration 26:  f(p) =  2.867e-07  
Iteration 27:  f(p) =  2.800e-07  
Iteration 28:  f(p) =  2.787e-07  
Iteration 29:  f(p) =  2.787e-07  
Iteration 30:  f(p) =  2.787e-07  
Iteration 31:  f(p) =  2.787e-07  
Iteration 32:  f(p) =  2.787e-07  
Iteration 33:  f(p) =  2.785e-07  
Iteration 34:  f(p) =  2.759e-07  
Iteration 35:  f(p) =  2.662e-07  
Iteration 36:  f(p) =  2.569e-07  
Iteration 37:  f(p) =  2.553e-07  
Iteration 38:  f(p) =  2.553e-07  
Iteration 39:  f(p) =  2.553e-07  
Iteration 40:  f(p) =  2.553e-07  
Iteration 41:  f(p) =  2.551e-07  
Iteration 42:  f(p) =  2.467e-07  
Iteration 43:  f(p) =  2.442e-07  
Iteration 44:  f(p) =  2.442e-07  
Iteration 45:  f(p) =  2.442e-07  
Iteration 46:  f(p) =  2.441e-07  
Iteration 47:  f(p) =  2.433e-07  
Iteration 48:  f(p) =  2.115e-07  
Iteration 49:  f(p) =  1.799e-07  
Iteration 50:  f(p) =  1.783e-07  
Iteration 51:  f(p) =  1.783e-07  
Iteration 52:  f(p) =  1.783e-07  
Iteration 53:  f(p) =  1.783e-07  
Iteration 54:  f(p) =  1.783e-07  
Iteration 55:  f(p) =  1.782e-07  
Iteration 56:  f(p) =  1.775e-07  
Iteration 57:  f(p) =  1.757e-07  
Iteration 58:  f(p) =  1.751e-07  
Iteration 59:  f(p) =  1.751e-07  
Iteration 60:  f(p) =  1.751e-07  
Iteration 61:  f(p) =  1.751e-07  
Iteration 62:  f(p) =  1.751e-07  
Iteration 63:  f(p) =  1.750e-07  
Iteration 64:  f(p) =  1.749e-07  
Iteration 65:  f(p) =  1.732e-07  
Iteration 66:  f(p) =  1.728e-07  
Iteration 67:  f(p) =  1.728e-07  
Iteration 68:  f(p) =  1.728e-07  
Iteration 69:  f(p) =  1.728e-07  
Iteration 70:  f(p) =  1.728e-07  
Iteration 71:  f(p) =  1.728e-07  
Iteration 72:  f(p) =  1.728e-07  
Iteration 73:  f(p) =  1.728e-07  
Iteration 74:  f(p) =  1.728e-07  
Iteration 75:  f(p) =  1.728e-07  
Iteration 76:  f(p) =  1.728e-07  
Iteration 77:  f(p) =  1.728e-07  
Iteration 78:  f(p) =  1.727e-07  
Iteration 79:  f(p) =  1.726e-07  
Iteration 80:  f(p) =  1.720e-07  
Iteration 81:  f(p) =  1.718e-07  
Iteration 82:  f(p) =  1.718e-07  
Iteration 83:  f(p) =  1.718e-07  
Iteration 84:  f(p) =  1.718e-07  
Iteration 85:  f(p) =  1.718e-07  
Iteration 86:  f(p) =  1.718e-07  
Iteration 87:  f(p) =  1.718e-07  
Iteration 88:  f(p) =  1.718e-07  
Iteration 89:  f(p) =  1.718e-07  
Iteration 90:  f(p) =  1.718e-07  
Iteration 91:  f(p) =  1.718e-07  
Iteration 92:  f(p) =  1.718e-07  
Iteration 93:  f(p) =  1.718e-07  
Iteration 94:  f(p) =  1.718e-07  
Iteration 95:  f(p) =  1.717e-07  
Iteration 96:  f(p) =  1.716e-07  
Iteration 97:  f(p) =  1.716e-07  
Iteration 98:  f(p) =  1.716e-07  
Iteration 99:  f(p) =  1.716e-07  

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (over identified) + 1*abs(wgt_cv()-.75)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.059191
        1.x2 |   -1.39265
        1.x3 |  -.3876981
          x4 |  -.2597608
          x5 |   .0455692
          x6 |  -.2089931
          x7 |   .0230333
         x90 |   .1272559
         x91 |  -.1212326
         x92 |   .0972184
         x93 |    .048144
         x94 |  -.1060477
         x95 |   .0105288
       _cons |   .6347725
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5187629  -.0513716  -.1024012   .5016695   1.005638
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0118444  -.0009749  -.0093507   .1042572   .9264172
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0264242   -.004685  -.0319515   .1466296   .8336934
             |
          x4 |  .4347826   .4476614  -.0128788  -.0258379   .4984448   1.002336
          x5 |  25.46739   25.56132  -.0939326  -.0172546   5.443922   .6467529
          x6 |  11.86957   12.03336  -.1637988  -.1020517   1.605057   .5461046
          x7 |  6.858696   6.780637   .0780587   .0219469   3.556704   1.144355
         x90 |  .0972024   .0722594    .024943   .0261516   .9537854   .8581527
         x91 | -.0890157  -.0683618  -.0206539  -.0219034   .9429542   .9389306
         x92 |  .0453787   .0233094   .0220693   .0209948   1.051175   1.130348
         x93 |  .0865687   .0787138   .0078548   .0084011   .9349714   .9405748
         x94 | -.1299173  -.1086981  -.0212191  -.0229443   .9248091   .7927288
         x95 | -.0807251  -.0823446   .0016195   .0017719    .914005   .8768564
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.01957
  Mean absolute standardized diff.    = 0.03177
  Maximum absolute standardized diff. = 0.10240
  C.V. of matching weights:           = 0.79338
  S.D. of matching weights:           = 0.79338
  Skewness of matching weights:       = 0.09066
  Kurtosis of matching weights:       = 0.01713
  Maximum matching weight:            = 5.44201
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3425.359     3432.345  -6.985723  -.0476743   3432.345
   y1_binary |    .9471559     .9496655  -.0025096  -.0515552   .9496655
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. // furthermore, you can target skiwness, kurtosis, or max weight
. psweight pcbps `treatvar' `varlist' if `tousevar', atet treatvariance cvtarget(1 .5 6) skewtarget(1 0.07 2) `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .02922494  
Iteration 1:   f(p) =   .0052291  
Iteration 2:   f(p) =  .00462693  
Iteration 3:   f(p) =  .00015809  
Iteration 4:   f(p) =  .00007042  
Iteration 5:   f(p) =  .00005102  
Iteration 6:   f(p) =  .00004883  
Iteration 7:   f(p) =  .00004295  
Iteration 8:   f(p) =  .00004232  
Iteration 9:   f(p) =  .00003913  
Iteration 10:  f(p) =  .00002792  
Iteration 11:  f(p) =  .00001061  
Iteration 12:  f(p) =  6.971e-06  
Iteration 13:  f(p) =  6.885e-06  
Iteration 14:  f(p) =  6.732e-06  
Iteration 15:  f(p) =  6.657e-06  
Iteration 16:  f(p) =  6.588e-06  
Iteration 17:  f(p) =  6.391e-06  
Iteration 18:  f(p) =  6.378e-06  
Iteration 19:  f(p) =  6.347e-06  
Iteration 20:  f(p) =  6.198e-06  
Iteration 21:  f(p) =  5.881e-06  
Iteration 22:  f(p) =  3.862e-06  
Iteration 23:  f(p) =  3.852e-06  
Iteration 24:  f(p) =  3.469e-06  
Iteration 25:  f(p) =  3.230e-06  
Iteration 26:  f(p) =  3.076e-06  
Iteration 27:  f(p) =  2.856e-06  
Iteration 28:  f(p) =  2.849e-06  
Iteration 29:  f(p) =  2.813e-06  
Iteration 30:  f(p) =  2.788e-06  
Iteration 31:  f(p) =  2.739e-06  
Iteration 32:  f(p) =  2.708e-06  
Iteration 33:  f(p) =  2.579e-06  
Iteration 34:  f(p) =  2.569e-06  
Iteration 35:  f(p) =  2.510e-06  
Iteration 36:  f(p) =  2.501e-06  
Iteration 37:  f(p) =  2.458e-06  
Iteration 38:  f(p) =  2.411e-06  
Iteration 39:  f(p) =  2.313e-06  
Iteration 40:  f(p) =  2.297e-06  
Iteration 41:  f(p) =  2.268e-06  
Iteration 42:  f(p) =  2.248e-06  
Iteration 43:  f(p) =  2.188e-06  
Iteration 44:  f(p) =  2.176e-06  
Iteration 45:  f(p) =  2.078e-06  
Iteration 46:  f(p) =  1.991e-06  
Iteration 47:  f(p) =  1.921e-06  
Iteration 48:  f(p) =  1.896e-06  
Iteration 49:  f(p) =  1.814e-06  
Iteration 50:  f(p) =  1.736e-06  
Iteration 51:  f(p) =  1.394e-06  
Iteration 52:  f(p) =  1.336e-06  
Iteration 53:  f(p) =  1.298e-06  
Iteration 54:  f(p) =  1.204e-06  
Iteration 55:  f(p) =  1.151e-06  
Iteration 56:  f(p) =  1.070e-06  
Iteration 57:  f(p) =  1.019e-06  
Iteration 58:  f(p) =  9.484e-07  
Iteration 59:  f(p) =  9.261e-07  
Iteration 60:  f(p) =  8.965e-07  
Iteration 61:  f(p) =  8.603e-07  
Iteration 62:  f(p) =  8.468e-07  
Iteration 63:  f(p) =  7.723e-07  
Iteration 64:  f(p) =  7.479e-07  
Iteration 65:  f(p) =  7.449e-07  
Iteration 66:  f(p) =  7.161e-07  
Iteration 67:  f(p) =  6.769e-07  
Iteration 68:  f(p) =  6.701e-07  
Iteration 69:  f(p) =  5.348e-07  
Iteration 70:  f(p) =  5.240e-07  
Iteration 71:  f(p) =  4.986e-07  
Iteration 72:  f(p) =  4.562e-07  
Iteration 73:  f(p) =  4.393e-07  
Iteration 74:  f(p) =  4.215e-07  
Iteration 75:  f(p) =  3.852e-07  
Iteration 76:  f(p) =  3.390e-07  
Iteration 77:  f(p) =  3.232e-07  
Iteration 78:  f(p) =  2.945e-07  
Iteration 79:  f(p) =  2.812e-07  
Iteration 80:  f(p) =  2.208e-07  
Iteration 81:  f(p) =  2.175e-07  
Iteration 82:  f(p) =  1.978e-07  
Iteration 83:  f(p) =  1.914e-07  
Iteration 84:  f(p) =  1.724e-07  
Iteration 85:  f(p) =  1.621e-07  
Iteration 86:  f(p) =  1.576e-07  
Iteration 87:  f(p) =  1.550e-07  
Iteration 88:  f(p) =  1.541e-07  
Iteration 89:  f(p) =  1.512e-07  
Iteration 90:  f(p) =  1.498e-07  
Iteration 91:  f(p) =  1.450e-07  
Iteration 92:  f(p) =  1.403e-07  
Iteration 93:  f(p) =  1.364e-07  
Iteration 94:  f(p) =  1.331e-07  
Iteration 95:  f(p) =  1.307e-07  
Iteration 96:  f(p) =  1.303e-07  
Iteration 97:  f(p) =  1.298e-07  
Iteration 98:  f(p) =  1.297e-07  
Iteration 99:  f(p) =  1.286e-07  
Iteration 100: f(p) =  1.219e-07  
Iteration 101: f(p) =  1.219e-07  
Iteration 102: f(p) =  1.217e-07  
Iteration 103: f(p) =  1.213e-07  
Iteration 104: f(p) =  1.200e-07  
Iteration 105: f(p) =  1.193e-07  
Iteration 106: f(p) =  1.190e-07  
Iteration 107: f(p) =  1.189e-07  
Iteration 108: f(p) =  1.188e-07  
Iteration 109: f(p) =  1.184e-07  
Iteration 110: f(p) =  1.178e-07  
Iteration 111: f(p) =  1.176e-07  
Iteration 112: f(p) =  1.175e-07  
Iteration 113: f(p) =  1.174e-07  
Iteration 114: f(p) =  1.170e-07  
Iteration 115: f(p) =  1.169e-07  
Iteration 116: f(p) =  1.168e-07  
Iteration 117: f(p) =  1.168e-07  
Iteration 118: f(p) =  1.167e-07  
Iteration 119: f(p) =  1.166e-07  
Iteration 120: f(p) =  1.165e-07  
convergence not achieved

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_cv()-.5)^6) + 1*abs(wgt_skewness()-.07)^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -.2899516
        1.x2 |  -1.592469
        1.x3 |  -.5257276
          x4 |  -.3467867
          x5 |  -.0350324
          x6 |  -.1047599
          x7 |  -.0256763
         x90 |   .0317328
         x91 |  -.0681333
         x92 |    .050871
         x93 |   .0415256
         x94 |  -.0695245
         x95 |  -.0625132
       _cons |   1.145243
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .6092538  -.1418625  -.2827808   .5016695   1.054573
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0078201   .0030495   .0292496   .1042572   1.397476
             |
          x3 |
          0  |  (empty)
          1  |  .0217391    .022345  -.0006058  -.0041317   .1466296   .9817758
             |
          x4 |  .4347826   .4858537  -.0510711  -.1024609   .4984448   .9921472
          x5 |  25.46739   24.63179   .8356026   .1534928   5.443922   .8117591
          x6 |  11.86957   12.31452  -.4449561  -.2772215   1.605057   .5241741
          x7 |  6.858696    6.29002   .5686753   .1598883   3.556704   1.151425
         x90 |  .0972024   .0350605   .0621419   .0651529   .9537854   .8571816
         x91 | -.0890157  -.0529271  -.0360886  -.0382718   .9429542   .8860992
         x92 |  .0453787   .0093612   .0360174    .034264   1.051175    1.12245
         x93 |  .0865687     .08338   .0031886   .0034104   .9349714   .9307149
         x94 | -.1299173  -.0607038  -.0692135  -.0748409   .9248091   .8427202
         x95 | -.0807251  -.1609376   .0802125   .0877594    .914005    .874419
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.01896
  Mean absolute standardized diff.    = 0.10099
  Maximum absolute standardized diff. = 0.28278
  C.V. of matching weights:           = 0.54822
  S.D. of matching weights:           = 0.54822
  Skewness of matching weights:       = 0.07000
  Kurtosis of matching weights:       = 0.01358
  Maximum matching weight:            = 3.35819
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3432.154     3444.195  -12.04021  -.0893316   3444.195
   y1_binary |    .9485424     .9580986  -.0095563  -.2414415   .9580986
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. capture nois {
. psweight pcbps `treatvar' `varlist' if `tousevar', atet treatvariance maxtarget(1 10 2) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -346.57359
alternative:   f(p) = -283.03849
rescale:       f(p) = -247.46401
Iteration 0:   f(p) = -247.46401  
Iteration 1:   f(p) = -223.85141  
Iteration 2:   f(p) = -211.21543  
Iteration 3:   f(p) = -211.17754  
Iteration 4:   f(p) = -211.17753  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =   .5055777  
Iteration 1:   f(p) =  .06009392  (backed up)
Iteration 2:   f(p) =  .00002048  
Iteration 3:   f(p) =  2.925e-06  (backed up)
Iteration 4:   f(p) =  2.883e-06  
Iteration 5:   f(p) =  2.837e-06  
Iteration 6:   f(p) =  2.795e-06  
Iteration 7:   f(p) =  2.523e-06  
Iteration 8:   f(p) =  2.441e-06  
Iteration 9:   f(p) =  2.340e-06  
Iteration 10:  f(p) =  2.315e-06  
Iteration 11:  f(p) =  2.134e-06  
Iteration 12:  f(p) =  2.037e-06  
Iteration 13:  f(p) =  2.011e-06  
Iteration 14:  f(p) =  1.933e-06  
Iteration 15:  f(p) =  1.864e-06  
Iteration 16:  f(p) =  1.680e-06  
Iteration 17:  f(p) =  1.524e-06  
Iteration 18:  f(p) =  1.505e-06  
Iteration 19:  f(p) =  1.163e-06  
Iteration 20:  f(p) =  1.113e-06  
Iteration 21:  f(p) =  1.068e-06  
Iteration 22:  f(p) =  9.804e-07  
Iteration 23:  f(p) =  9.679e-07  
Iteration 24:  f(p) =  8.896e-07  
Iteration 25:  f(p) =  8.189e-07  
Iteration 26:  f(p) =  6.698e-07  
Iteration 27:  f(p) =  6.540e-07  
Iteration 28:  f(p) =  5.947e-07  
Iteration 29:  f(p) =  4.347e-07  
Iteration 30:  f(p) =  4.139e-07  
Iteration 31:  f(p) =  3.817e-07  
Iteration 32:  f(p) =  3.741e-07  
Iteration 33:  f(p) =  3.351e-07  
Iteration 34:  f(p) =  3.108e-07  
Iteration 35:  f(p) =  3.065e-07  
Iteration 36:  f(p) =  2.885e-07  
Iteration 37:  f(p) =  2.611e-07  
Iteration 38:  f(p) =  2.428e-07  
Iteration 39:  f(p) =  2.192e-07  
Iteration 40:  f(p) =  1.898e-07  
Iteration 41:  f(p) =  1.882e-07  
Iteration 42:  f(p) =  1.750e-07  
Iteration 43:  f(p) =  1.593e-07  
Iteration 44:  f(p) =  1.487e-07  
Iteration 45:  f(p) =  1.314e-07  
Iteration 46:  f(p) =  1.162e-07  
Iteration 47:  f(p) =  1.134e-07  
Iteration 48:  f(p) =  9.346e-08  
Iteration 49:  f(p) =  8.786e-08  
Iteration 50:  f(p) =  7.989e-08  
Iteration 51:  f(p) =  7.526e-08  
Iteration 52:  f(p) =  5.248e-08  
Iteration 53:  f(p) =  5.201e-08  
Iteration 54:  f(p) =  4.731e-08  
Iteration 55:  f(p) =  4.284e-08  
Iteration 56:  f(p) =  3.970e-08  
Iteration 57:  f(p) =  3.613e-08  
Iteration 58:  f(p) =  3.005e-08  
Iteration 59:  f(p) =  2.656e-08  (backed up)
Iteration 60:  f(p) =  2.632e-08  
Iteration 61:  f(p) =  2.586e-08  
Iteration 62:  f(p) =  2.359e-08  
Iteration 63:  f(p) =  2.290e-08  
Iteration 64:  f(p) =  2.208e-08  
Iteration 65:  f(p) =  2.155e-08  
Iteration 66:  f(p) =  2.116e-08  
Iteration 67:  f(p) =  2.051e-08  
Iteration 68:  f(p) =  2.046e-08  
BFGS stepping has contracted, resetting BFGS Hessian
Iteration 69:  f(p) =  2.027e-08  
Iteration 70:  f(p) =  2.019e-08  (backed up)
Iteration 71:  f(p) =  2.018e-08  
Iteration 72:  f(p) =  2.017e-08  
Iteration 73:  f(p) =  1.976e-08  
Iteration 74:  f(p) =  1.971e-08  
Iteration 75:  f(p) =  1.961e-08  
Iteration 76:  f(p) =  1.942e-08  
Iteration 77:  f(p) =  1.942e-08  
Iteration 78:  f(p) =  1.940e-08  
Iteration 79:  f(p) =  1.939e-08  
Iteration 80:  f(p) =  1.939e-08  
Iteration 81:  f(p) =  1.939e-08  
Iteration 82:  f(p) =  1.938e-08  
Iteration 83:  f(p) =  1.938e-08  
Iteration 84:  f(p) =  1.938e-08  
Iteration 85:  f(p) =  1.932e-08  
Iteration 86:  f(p) =  1.926e-08  
Iteration 87:  f(p) =  1.911e-08  
Iteration 88:  f(p) =  1.881e-08  
Iteration 89:  f(p) =  1.877e-08  
Iteration 90:  f(p) =  1.871e-08  
Iteration 91:  f(p) =  1.861e-08  
Iteration 92:  f(p) =  1.858e-08  
Iteration 93:  f(p) =  1.850e-08  
Iteration 94:  f(p) =  1.850e-08  
Iteration 95:  f(p) =  1.836e-08  
Iteration 96:  f(p) =  1.829e-08  
Iteration 97:  f(p) =  1.825e-08  
Iteration 98:  f(p) =  1.813e-08  
Iteration 99:  f(p) =  1.806e-08  
Iteration 100: f(p) =  1.791e-08  
Iteration 101: f(p) =  1.780e-08  
Iteration 102: f(p) =  1.777e-08  
Iteration 103: f(p) =  1.767e-08  
Iteration 104: f(p) =  1.755e-08  
Iteration 105: f(p) =  1.746e-08  
Iteration 106: f(p) =  1.744e-08  
Iteration 107: f(p) =  1.738e-08  
BFGS stepping has contracted, resetting BFGS Hessian
Iteration 108: f(p) =  1.729e-08  
Iteration 109: f(p) =  1.727e-08  (backed up)
Iteration 110: f(p) =  1.727e-08  
Iteration 111: f(p) =  1.726e-08  
Iteration 112: f(p) =  1.724e-08  
Iteration 113: f(p) =  1.717e-08  
Iteration 114: f(p) =  1.716e-08  
Iteration 115: f(p) =  1.714e-08  
Iteration 116: f(p) =  1.714e-08  
Iteration 117: f(p) =  1.713e-08  
Iteration 118: f(p) =  1.712e-08  
BFGS stepping has contracted, resetting BFGS Hessian
Iteration 119: f(p) =  1.712e-08  
Iteration 120: f(p) =  1.712e-08  (backed up)
convergence not achieved

Propensity score model coefficients                Number of obs  =        500
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_max()-10)^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.133709
        1.x2 |  -1.632051
        1.x3 |  -.5828656
          x4 |  -.3925156
          x5 |   .0650698
          x6 |   -.305499
          x7 |   .0288899
         x90 |    .106748
         x91 |  -.1458165
         x92 |   .1185619
         x93 |   .0403952
         x94 |  -.0837468
         x95 |   .0727277
       _cons |   1.286462
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .5114986  -.0441073   -.087921   .5016695   1.004753
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0095113   .0013583   .0130279   .1042572    1.15095
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0236983  -.0019592  -.0133615   .1466296   .9269916
             |
          x4 |  .4347826   .3986262   .0361564   .0725384   .4984448   1.033851
          x5 |  25.46739   26.08669  -.6193009  -.1137601   5.443922   .5849916
          x6 |  11.86957   11.72447   .1450981   .0904006   1.605057    .567583
          x7 |  6.858696   6.817667    .041029   .0115357   3.556704   1.154724
         x90 |  .0972024   .0042921   .0929103   .0974122   .9537854   .8513273
         x91 | -.0890157  -.0690494  -.0199663  -.0211741   .9429542   .9547951
         x92 |  .0453787   .0256923   .0196864    .018728   1.051175   1.167135
         x93 |  .0865687   .0829178   .0036509   .0039048   .9349714   .9433021
         x94 | -.1299173  -.0989367  -.0309806  -.0334995   .9248091   .7434868
         x95 | -.0807251  -.0365585  -.0441666   -.048322    .914005   .9131397
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00081
  Mean absolute standardized diff.    = 0.04812
  Maximum absolute standardized diff. = 0.11376
  C.V. of matching weights:           = 1.04290
  S.D. of matching weights:           = 1.04290
  Skewness of matching weights:       = 0.15231
  Kurtosis of matching weights:       = 0.04629
  Maximum matching weight:            = 10.00000
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3423.963     3430.879  -6.916152  -.0433303   3430.879
   y1_binary |    .9463256     .9468505  -.0005249  -.0095649   .9468505
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. }
. 
. // * WEIGHTED DATA EXAMPLES *
. 
. // Replicate CBPS
. psweight cbps `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], ate pooledvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00008909  
Iteration 1:   f(p) =  .00006006  
Iteration 2:   f(p) =  .00005798  
Iteration 3:   f(p) =  .00005798  
Iteration 4:   f(p) =  .00005797  
Iteration 5:   f(p) =  .00005722  
Iteration 6:   f(p) =  .00004803  
Iteration 7:   f(p) =  .00002157  
Iteration 8:   f(p) =  .00001689  
Iteration 9:   f(p) =  .00001603  
Iteration 10:  f(p) =  .00001599  
Iteration 11:  f(p) =  .00001599  
Iteration 12:  f(p) =  .00001599  
Iteration 13:  f(p) =  9.221e-06  
Iteration 14:  f(p) =  5.300e-06  
Iteration 15:  f(p) =  4.994e-06  
Iteration 16:  f(p) =  4.992e-06  
Iteration 17:  f(p) =  4.991e-06  
Iteration 18:  f(p) =  4.989e-06  
Iteration 19:  f(p) =  4.935e-06  
Iteration 20:  f(p) =  3.837e-06  
Iteration 21:  f(p) =  2.150e-06  
Iteration 22:  f(p) =  1.975e-06  
Iteration 23:  f(p) =  1.975e-06  
Iteration 24:  f(p) =  1.975e-06  
Iteration 25:  f(p) =  1.974e-06  
Iteration 26:  f(p) =  1.908e-06  
Iteration 27:  f(p) =  1.272e-06  
Iteration 28:  f(p) =  8.737e-07  
Iteration 29:  f(p) =  8.670e-07  
Iteration 30:  f(p) =  8.670e-07  
Iteration 31:  f(p) =  8.667e-07  
Iteration 32:  f(p) =  8.507e-07  
Iteration 33:  f(p) =  3.254e-07  
Iteration 34:  f(p) =  3.129e-07  
Iteration 35:  f(p) =  3.129e-07  
Iteration 36:  f(p) =  3.129e-07  
Iteration 37:  f(p) =  3.126e-07  
Iteration 38:  f(p) =  2.070e-07  
Iteration 39:  f(p) =  7.590e-08  
Iteration 40:  f(p) =  6.960e-08  
Iteration 41:  f(p) =  6.958e-08  
Iteration 42:  f(p) =  6.957e-08  
Iteration 43:  f(p) =  6.522e-08  
Iteration 44:  f(p) =  3.644e-08  
Iteration 45:  f(p) =  9.279e-09  
Iteration 46:  f(p) =  8.088e-09  
Iteration 47:  f(p) =  8.087e-09  
Iteration 48:  f(p) =  8.086e-09  
Iteration 49:  f(p) =  8.031e-09  
Iteration 50:  f(p) =  6.083e-09  
Iteration 51:  f(p) =  1.213e-09  
Iteration 52:  f(p) =  9.270e-10  
Iteration 53:  f(p) =  9.270e-10  
Iteration 54:  f(p) =  9.265e-10  
Iteration 55:  f(p) =  9.117e-10  
Iteration 56:  f(p) =  4.890e-10  
Iteration 57:  f(p) =  9.389e-11  
Iteration 58:  f(p) =  8.908e-11  
Iteration 59:  f(p) =  8.908e-11  
Iteration 60:  f(p) =  8.906e-11  
Iteration 61:  f(p) =  8.865e-11  
Iteration 62:  f(p) =  3.016e-11  
Iteration 63:  f(p) =  4.420e-12  
Iteration 64:  f(p) =  4.145e-12  
Iteration 65:  f(p) =  4.144e-12  
Iteration 66:  f(p) =  4.144e-12  
Iteration 67:  f(p) =  4.138e-12  
Iteration 68:  f(p) =  4.068e-12  
Iteration 69:  f(p) =  3.237e-12  
Iteration 70:  f(p) =  8.256e-13  
Iteration 71:  f(p) =  8.346e-14  
Iteration 72:  f(p) =  7.794e-14  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.502414
        1.x2 |  -2.525402
        1.x3 |  -.8190827
          x4 |   -.323638
          x5 |   .0771204
          x6 |  -.4884777
          x7 |     .07227
         x90 |   .0234173
         x91 |   .0257841
         x92 |   .2152131
         x93 |  -.0285334
         x94 |  -.3393879
         x95 |  -.0407887
       _cons |   3.075427
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6695178   .6695184  -6.48e-07  -1.38e-06   .4706261   1.004329
             |
          x2 |
          0  |  (empty)
          1  |  .0220668   .0220668   7.16e-08   4.87e-07   .1469755   1.004331
             |
          x3 |
          0  |  (empty)
          1  |  .0366905   .0366911  -6.20e-07  -3.30e-06   .1880978   1.004312
             |
          x4 |   .485133   .4851327   2.43e-07   4.86e-07   .5000334   1.004328
          x5 |  26.17888   26.17889  -.0000147  -2.35e-06   6.237856   .6789016
          x6 |  12.63449   12.63449   1.53e-06   6.52e-07   2.338006    .574066
          x7 |   6.75523   6.755245  -.0000157  -4.65e-06   3.370937   1.187219
         x90 | -.0520319  -.0520316  -2.97e-07  -2.84e-07   1.046128   1.163665
         x91 |  .0164868   .0164855   1.36e-06   1.40e-06   .9705718   .9930967
         x92 | -.0021635  -.0021647   1.20e-06   1.18e-06   1.017927   1.359803
         x93 |  .0456889   .0456925  -3.56e-06  -3.70e-06   .9636158   .8837309
         x94 | -.0910013   -.091001  -3.05e-07  -3.01e-07   1.014116    .785929
         x95 | -.0894585   -.089459   5.28e-07   5.39e-07   .9789419   .8236875
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00000
  C.V. of matching weights:           = 0.52710
  S.D. of matching weights:           = 0.52850
  Skewness of matching weights:       = 0.20265
  Kurtosis of matching weights:       = 0.07624
  Maximum matching weight:            = 6.64235
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3445.465     3445.465   .0003475   2.24e-06   3445.465
   y1_binary |    .9569443     .9569441   1.48e-07   3.28e-06   .9569441
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight cbpsoid `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], ate pooledvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .02296546  
Iteration 1:   f(p) =  .01893921  
Iteration 2:   f(p) =  .01888779  
Iteration 3:   f(p) =  .01864993  
Iteration 4:   f(p) =  .01807796  
Iteration 5:   f(p) =  .01796175  
Iteration 6:   f(p) =  .01796123  
Iteration 7:   f(p) =  .01795223  
Iteration 8:   f(p) =  .01782936  
Iteration 9:   f(p) =  .01781765  
Iteration 10:  f(p) =  .01781754  
Iteration 11:  f(p) =  .01781616  
Iteration 12:  f(p) =  .01779008  
Iteration 13:  f(p) =   .0177803  
Iteration 14:  f(p) =  .01778019  
Iteration 15:  f(p) =  .01778008  
Iteration 16:  f(p) =  .01777876  
Iteration 17:  f(p) =  .01777329  
Iteration 18:  f(p) =  .01777274  
Iteration 19:  f(p) =  .01777274  
Iteration 20:  f(p) =   .0177727  
Iteration 21:  f(p) =  .01777239  
Iteration 22:  f(p) =  .01777192  
Iteration 23:  f(p) =  .01777187  
Iteration 24:  f(p) =  .01777187  
Iteration 25:  f(p) =  .01777187  
Iteration 26:  f(p) =  .01777185  
Iteration 27:  f(p) =  .01777185  
Iteration 28:  f(p) =  .01777185  
Iteration 29:  f(p) =  .01777185  
Iteration 30:  f(p) =  .01777185  
Iteration 31:  f(p) =  .01777184  
Iteration 32:  f(p) =  .01777184  
Iteration 33:  f(p) =  .01777184  
Iteration 34:  f(p) =  .01777184  
Iteration 35:  f(p) =  .01777184  
Iteration 36:  f(p) =  .01777184  
Iteration 37:  f(p) =  .01777184  
Iteration 38:  f(p) =  .01777184  
Iteration 39:  f(p) =  .01777184  
Iteration 40:  f(p) =  .01777184  
Iteration 41:  f(p) =  .01777184  
Iteration 42:  f(p) =  .01777184  
Iteration 43:  f(p) =  .01777184  
Iteration 44:  f(p) =  .01777184  
Iteration 45:  f(p) =  .01777184  
Iteration 46:  f(p) =  .01777184  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (over identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.226645
        1.x2 |  -1.653762
        1.x3 |  -.7776875
          x4 |  -.3532491
          x5 |   .0574629
          x6 |  -.2583005
          x7 |   .0080439
         x90 |   .0890276
         x91 |  -.1706881
         x92 |   .1765097
         x93 |   .1136718
         x94 |  -.1271347
         x95 |   .0214704
       _cons |   1.180156
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6415953   .6970127  -.0554173  -.1194311   .4640107   1.093567
             |
          x2 |
          0  |  (empty)
          1  |  .0142909   .0234703  -.0091794  -.0628462   .1460619   .6172753
             |
          x3 |
          0  |  (empty)
          1  |  .0334441   .0380925  -.0046484  -.0245369   .1894461   .8860313
             |
          x4 |  .4881571   .4821182   .0060389   .0120785    .499973    1.00505
          x5 |  25.72258   26.31855  -.5959643  -.1000426   5.957105   .7659019
          x6 |  12.33189    12.8994  -.5675068  -.2533225   2.240254   .6135512
          x7 |  6.911084   6.688832    .222252   .0657612   3.379685   1.211887
         x90 | -.0440389  -.0251309   -.018908  -.0185767    1.01783   1.120774
         x91 |  .0661735  -.0257224   .0918959   .0936219   .9815644   .9753854
         x92 | -.0382008  -.0020298   -.036171  -.0355957   1.016161    1.20721
         x93 |  .0014101   .0645199  -.0631098  -.0653399   .9658703   .9125525
         x94 | -.1442668  -.0285682  -.1156986  -.1166712   .9916637   .8216037
         x95 | -.1053626    -.07164  -.0337226  -.0344811   .9780038    .803947
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.05072
  Mean absolute standardized diff.    = 0.07710
  Maximum absolute standardized diff. = 0.25332
  C.V. of matching weights:           = 0.32369
  S.D. of matching weights:           = 0.32442
  Skewness of matching weights:       = 0.14997
  Kurtosis of matching weights:       = 0.05697
  Maximum matching weight:            = 4.34331
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3443.873     3455.428  -11.55447  -.0823173   3455.428
   y1_binary |    .9538356     .9614582  -.0076226  -.1871519   .9614582
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight cbps `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet pooledvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00001735  
Iteration 1:   f(p) =  6.450e-06  
Iteration 2:   f(p) =  5.892e-06  
Iteration 3:   f(p) =  5.889e-06  
Iteration 4:   f(p) =  5.889e-06  
Iteration 5:   f(p) =  5.884e-06  
Iteration 6:   f(p) =  5.782e-06  
Iteration 7:   f(p) =  1.671e-06  
Iteration 8:   f(p) =  1.353e-06  
Iteration 9:   f(p) =  1.347e-06  
Iteration 10:  f(p) =  1.347e-06  
Iteration 11:  f(p) =  1.345e-06  
Iteration 12:  f(p) =  1.278e-06  
Iteration 13:  f(p) =  7.536e-07  
Iteration 14:  f(p) =  4.028e-07  
Iteration 15:  f(p) =  3.959e-07  
Iteration 16:  f(p) =  3.959e-07  
Iteration 17:  f(p) =  3.950e-07  
Iteration 18:  f(p) =  3.836e-07  
Iteration 19:  f(p) =  2.750e-07  
Iteration 20:  f(p) =  7.890e-08  
Iteration 21:  f(p) =  7.812e-08  
Iteration 22:  f(p) =  7.812e-08  
Iteration 23:  f(p) =  7.809e-08  
Iteration 24:  f(p) =  2.232e-08  
Iteration 25:  f(p) =  1.288e-08  
Iteration 26:  f(p) =  1.287e-08  
Iteration 27:  f(p) =  1.287e-08  
Iteration 28:  f(p) =  1.283e-08  
Iteration 29:  f(p) =  1.212e-08  
Iteration 30:  f(p) =  6.221e-09  
Iteration 31:  f(p) =  3.039e-09  
Iteration 32:  f(p) =  2.965e-09  
Iteration 33:  f(p) =  2.965e-09  
Iteration 34:  f(p) =  2.961e-09  
Iteration 35:  f(p) =  2.870e-09  
Iteration 36:  f(p) =  2.107e-09  
Iteration 37:  f(p) =  7.386e-10  
Iteration 38:  f(p) =  6.667e-10  
Iteration 39:  f(p) =  6.665e-10  
Iteration 40:  f(p) =  6.664e-10  
Iteration 41:  f(p) =  6.635e-10  
Iteration 42:  f(p) =  6.060e-10  
Iteration 43:  f(p) =  3.009e-10  
Iteration 44:  f(p) =  2.190e-10  
Iteration 45:  f(p) =  2.181e-10  
Iteration 46:  f(p) =  2.181e-10  
Iteration 47:  f(p) =  2.181e-10  
Iteration 48:  f(p) =  2.176e-10  
Iteration 49:  f(p) =  2.008e-10  
Iteration 50:  f(p) =  8.725e-11  
Iteration 51:  f(p) =  5.177e-11  
Iteration 52:  f(p) =  5.109e-11  
Iteration 53:  f(p) =  5.109e-11  
Iteration 54:  f(p) =  5.108e-11  
Iteration 55:  f(p) =  5.080e-11  
Iteration 56:  f(p) =  4.319e-11  
Iteration 57:  f(p) =  7.492e-12  
Iteration 58:  f(p) =  1.164e-12  
Iteration 59:  f(p) =  1.133e-12  
Iteration 60:  f(p) =  1.133e-12  
Iteration 61:  f(p) =  1.132e-12  
Iteration 62:  f(p) =  1.123e-12  
Iteration 63:  f(p) =  6.692e-13  
Iteration 64:  f(p) =  1.708e-13  
Iteration 65:  f(p) =  1.512e-13  
Iteration 66:  f(p) =  1.511e-13  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.447067
        1.x2 |  -1.546866
        1.x3 |  -.4711119
          x4 |  -.3822617
          x5 |   .0635834
          x6 |  -.2432316
          x7 |    .047704
         x90 |   .1335012
         x91 |  -.1336148
         x92 |   .1522979
         x93 |   .0757708
         x94 |  -.1016183
         x95 |  -.0383404
       _cons |      .6266
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4512189   4.26e-06   8.57e-06   .4978682    1.00433
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0114041  -1.89e-07  -1.78e-06    .106233   1.004312
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0240628   9.22e-07   6.01e-06   .1533227   1.004365
             |
          x4 |  .4218861   .4218849   1.21e-06   2.45e-06   .4941119   1.004329
          x5 |  25.44699   25.44697   .0000137   2.05e-06    6.66557   .6144636
          x6 |  11.84757   11.84755   .0000196   9.58e-06   2.042371   .5982538
          x7 |  7.015422    7.01543  -8.52e-06  -2.55e-06   3.345322   1.161762
         x90 |  .0839738   .0839754  -1.59e-06  -1.55e-06     1.0258   .8505311
         x91 | -.0648837  -.0648849   1.23e-06   1.30e-06   .9411048   .9922921
         x92 |  .0575388   .0575408  -2.03e-06  -2.06e-06   .9892728   1.118264
         x93 |  .1016523   .1016503   2.03e-06   2.15e-06   .9410808   1.012574
         x94 | -.1252265  -.1252288   2.34e-06   2.28e-06    1.02686   .7576608
         x95 | -.1044649  -.1044664   1.41e-06   1.46e-06   .9627681   .8646446
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00001
  C.V. of matching weights:           = 1.03194
  S.D. of matching weights:           = 1.02713
  Skewness of matching weights:       = 0.11350
  Kurtosis of matching weights:       = 0.02292
  Maximum matching weight:            = 7.00792
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.367     3431.366   .0005904   3.44e-06   3431.366
   y1_binary |    .9509094     .9509091   2.71e-07   5.39e-06   .9509091
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight cbpsoid `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet pooledvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00053487  
Iteration 1:   f(p) =  .00021848  
Iteration 2:   f(p) =  .00021162  
Iteration 3:   f(p) =  .00021159  
Iteration 4:   f(p) =  .00021001  
Iteration 5:   f(p) =  .00019724  
Iteration 6:   f(p) =   .0001771  
Iteration 7:   f(p) =  .00017502  
Iteration 8:   f(p) =  .00017501  
Iteration 9:   f(p) =  .00017499  
Iteration 10:  f(p) =  .00017465  
Iteration 11:  f(p) =  .00017249  
Iteration 12:  f(p) =  .00017245  
Iteration 13:  f(p) =  .00017241  
Iteration 14:  f(p) =  .00017223  
Iteration 15:  f(p) =  .00017218  
Iteration 16:  f(p) =  .00017218  
Iteration 17:  f(p) =  .00017218  
Iteration 18:  f(p) =  .00017218  
Iteration 19:  f(p) =  .00017216  
Iteration 20:  f(p) =  .00017216  
Iteration 21:  f(p) =  .00017216  
Iteration 22:  f(p) =  .00017216  
Iteration 23:  f(p) =  .00017216  
Iteration 24:  f(p) =  .00017215  
Iteration 25:  f(p) =  .00017215  
Iteration 26:  f(p) =  .00017215  
Iteration 27:  f(p) =  .00017215  
Iteration 28:  f(p) =  .00017215  
Iteration 29:  f(p) =  .00017215  
Iteration 30:  f(p) =  .00017215  
Iteration 31:  f(p) =  .00017215  
Iteration 32:  f(p) =  .00017215  
Iteration 33:  f(p) =  .00017215  
Iteration 34:  f(p) =  .00017215  
Iteration 35:  f(p) =  .00017215  
Iteration 36:  f(p) =  .00017215  
Iteration 37:  f(p) =  .00017215  
Iteration 38:  f(p) =  .00017215  
Iteration 39:  f(p) =  .00017215  
Iteration 40:  f(p) =  .00017215  
Iteration 41:  f(p) =  .00017215  
Iteration 42:  f(p) =  .00017215  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (over identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.393749
        1.x2 |  -1.561035
        1.x3 |  -.4600074
          x4 |  -.3846166
          x5 |   .0606091
          x6 |  -.2482014
          x7 |   .0443351
         x90 |   .1306487
         x91 |  -.1205476
         x92 |   .1453091
         x93 |   .0704761
         x94 |  -.1075638
         x95 |  -.0307915
       _cons |   .7598464
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff    sd_pool  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4553292   -.004106   -.008242    .498186   1.002774
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0111963   .0002076   .0019684   .1054489   1.022732
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0242797   -.000216   -.001404   .1538722    .995612
             |
          x4 |  .4218861   .4235251   -.001639  -.0033157    .494322   1.003286
          x5 |  25.44699   25.39436   .0526232   .0078929   6.667188   .6141311
          x6 |  11.84757   11.82507   .0224993   .0110128   2.043017   .5978372
          x7 |  7.015422   6.978163   .0372587   .0111276   3.348319   1.159171
         x90 |  .0839738   .0816058   .0023681   .0023047   1.027479   .8472278
         x91 | -.0648837  -.0554767   -.009407  -.0099829   .9423132   .9892043
         x92 |  .0575388   .0526515   .0048873   .0049457   .9881782   1.121369
         x93 |  .1016523   .0977101   .0039423    .004191   .9406607   1.013686
         x94 | -.1252265   -.131327   .0061005   .0059387    1.02725   .7569926
         x95 | -.1044649  -.1015495  -.0029155   -.003029   .9625008   .8652191
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00180
  Mean absolute standardized diff.    = 0.00580
  Maximum absolute standardized diff. = 0.01113
  C.V. of matching weights:           = 1.01903
  S.D. of matching weights:           = 1.01413
  Skewness of matching weights:       = 0.11289
  Kurtosis of matching weights:       = 0.02307
  Maximum matching weight:            = 7.10959
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.338     3430.734    .604315   .0035138   3430.734
   y1_binary |    .9509085     .9508973   .0000113   .0002232   .9508973
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. // Other objective functions
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00026308  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00001126  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  4.733e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  1.761e-13  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  1.959e-21  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = mean(stddiff())^2
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |    -1.2983
        1.x2 |  -1.629908
        1.x3 |  -.4511732
          x4 |  -.3553034
          x5 |     .07158
          x6 |  -.2773323
          x7 |   .0371348
         x90 |   .1283825
         x91 |  -.0952384
         x92 |   .1409151
         x93 |   .0743039
         x94 |  -.1419192
         x95 |  -.0201501
       _cons |   1.248955
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231    .487981  -.0367578  -.0736627   .4990018   .9953452
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0101189   .0012849   .0120678   .1064741   1.130389
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0243904  -.0003267  -.0021261   .1536741   .9912062
             |
          x4 |  .4218861   .4077074   .0141787   .0286301   .4952368   1.014377
          x5 |  25.44699   25.93854  -.4915521  -.0906567   5.422129   .5820457
          x6 |  11.84757   11.77832   .0692518   .0421771   1.641931   .5870658
          x7 |  7.015422   6.877177   .1382446   .0388826   3.555432   1.150412
         x90 |  .0839738   .0558963   .0280775   .0292561   .9597153   .8505931
         x91 | -.0648837  -.0314162  -.0334675  -.0356565     .93861   .9896462
         x92 |  .0575388   .0508004   .0067383   .0065071    1.03554   1.132825
         x93 |  .1016523   .1109109  -.0092586  -.0097832   .9463749   1.021042
         x94 | -.1252265  -.1752569   .0500304   .0546927   .9147554   .7291542
         x95 | -.1044649  -.1041671  -.0002979  -.0003284   .9069849   .8690484
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.03265
  Maximum absolute standardized diff. = 0.09066
  C.V. of matching weights:           = 1.06702
  S.D. of matching weights:           = 1.06436
  Skewness of matching weights:       = 0.15839
  Kurtosis of matching weights:       = 0.05090
  Maximum matching weight:            = 10.57743
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.445     3432.164  -.7196096  -.0044214   3432.164
   y1_binary |    .9507734     .9518109  -.0010374  -.0207556   .9518109
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight sd_sq `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .01944483  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .01784029  (backed up)
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .01032754  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00864458  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  .00309569  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  .00232241  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  .00091851  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  .00071552  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  .00032888  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  .00013227  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  .00006152  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  .00004718  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =  .00002689  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =   .0000235  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  .00002163  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  7.504e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  4.925e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  4.494e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  3.113e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  9.710e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  2.286e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  2.154e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 22:  f(p) =  2.154e-07  (backed up)

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = sum(stddiff()^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.446642
        1.x2 |  -1.542411
        1.x3 |  -.4738974
          x4 |  -.3823255
          x5 |   .0635736
          x6 |  -.2432677
          x7 |   .0476865
         x90 |   .1334607
         x91 |  -.1336203
         x92 |   .1523287
         x93 |    .075763
         x94 |   -.101627
         x95 |  -.0382575
       _cons |   1.349237
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4512686  -.0000455  -.0000912   .4990018    1.00431
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0114402  -.0000363  -.0003409   .1064741   1.001179
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0240204   .0000433   .0002816   .1536741   1.006093
             |
          x4 |  .4218861   .4218656   .0000205   .0000415   .4952368   1.004341
          x5 |  25.44699   25.44719  -.0002059   -.000038   5.422129    .614453
          x6 |  11.84757    11.8475   .0000671   .0000408   1.641931   .5982325
          x7 |  7.015422   7.015211   .0002107   .0000593   3.555432   1.161757
         x90 |  .0839738   .0839324   .0000414   .0000431   .9597153   .8505088
         x91 | -.0648837  -.0648818  -1.94e-06  -2.06e-06     .93861   .9922887
         x92 |  .0575388   .0575515  -.0000127  -.0000123    1.03554   1.118322
         x93 |  .1016523   .1016534  -1.08e-06  -1.14e-06   .9463749   1.012562
         x94 | -.1252265  -.1252589   .0000325   .0000355   .9147554   .7576437
         x95 | -.1044649  -.1044612  -3.70e-06  -4.08e-06   .9069849   .8646937
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00000
  Mean absolute standardized diff.    = 0.00008
  Maximum absolute standardized diff. = 0.00034
  C.V. of matching weights:           = 1.03183
  S.D. of matching weights:           = 1.02701
  Skewness of matching weights:       = 0.11352
  Kurtosis of matching weights:       = 0.02293
  Maximum matching weight:            = 7.01036
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.367     3431.377  -.0099861  -.0000627   3431.377
   y1_binary |    .9509094     .9509116  -2.24e-06  -.0000459   .9509116
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight stdprogdiff `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00143638  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00067059  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .00064802  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =   .0000134  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  9.156e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  2.838e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
BFGS stepping has contracted, resetting BFGS Hessian
Iteration 6:   f(p) =  2.838e-10  (backed up)

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = sum(stdprogdiff()^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.298747
        1.x2 |   -1.62998
        1.x3 |  -.4515062
          x4 |  -.3572147
          x5 |   .0701883
          x6 |  -.2800567
          x7 |   .0431086
         x90 |   .1194492
         x91 |  -.0953765
         x92 |     .13796
         x93 |   .0698357
         x94 |  -.1463559
         x95 |  -.0181699
       _cons |   1.249505
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4841375  -.0329144  -.0659605   .4990018   .9957723
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0101285   .0012754   .0119786   .1064741   1.129339
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0243611  -.0002974  -.0019355   .1536741   .9923684
             |
          x4 |  .4218861   .4098895   .0119966    .024224   .4952368   1.012708
          x5 |  25.44699   25.87234  -.4253573  -.0784484   5.422129   .5827996
          x6 |  11.84757   11.76328   .0842949   .0513389   1.641931   .5902429
          x7 |  7.015422   6.941308   .0741134   .0208451   3.555432   1.153549
         x90 |  .0839738   .0479572   .0360166   .0375284   .9597153    .848561
         x91 | -.0648837  -.0313858  -.0334979  -.0356889     .93861   .9913582
         x92 |  .0575388    .044551   .0129877    .012542    1.03554   1.135084
         x93 |  .1016523   .1048824  -.0032301  -.0034131   .9463749   1.017138
         x94 | -.1252265   -.177653   .0524265   .0573121   .9147554   .7316684
         x95 | -.1044649  -.0999076  -.0045573  -.0050247   .9069849   .8678567
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00195
  Mean absolute standardized diff.    = 0.03125
  Maximum absolute standardized diff. = 0.07845
  C.V. of matching weights:           = 1.06966
  S.D. of matching weights:           = 1.06662
  Skewness of matching weights:       = 0.15342
  Kurtosis of matching weights:       = 0.04736
  Maximum matching weight:            = 10.35666
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.435     3431.437  -.0020756  -.0000127   3431.437
   y1_binary |    .9507806       .95078   5.60e-07   .0000111     .95078
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. // IPW
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' [iw=`wgtvar'], atet aequations

Iteration 0:   EE criterion =  3.987e-18  
Iteration 1:   EE criterion =  1.443e-26  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATET                    |
                  treat |
(Treated vs Untreated)  |  -373.2561   49.21885    -7.58   0.000    -469.7233   -276.7889
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
             Untreated  |   3424.879   30.82585   111.10   0.000     3364.462    3485.297
------------------------+----------------------------------------------------------------
TME1                    |
                     x1 |  -1.299227   .2371935    -5.48   0.000    -1.764118   -.8343367
                        |
                     x2 |
                     1  |  -1.630014    .746001    -2.19   0.029    -3.092149   -.1678787
                        |
                     x3 |
                     1  |  -.4513753   .5770312    -0.78   0.434    -1.582336    .6795851
                     x4 |  -.3551911    .204881    -1.73   0.083    -.7567506    .0463684
                     x5 |    .058452   .0195046     3.00   0.003     .0202237    .0966803
                     x6 |  -.2821622    .049775    -5.67   0.000    -.3797195    -.184605
                     x7 |   .0332008   .0279849     1.19   0.235    -.0216486    .0880501
                    x90 |   .1276778   .0907109     1.41   0.159    -.0501124     .305468
                    x91 |  -.0961159   .0916737    -1.05   0.294     -.275793    .0835612
                    x92 |   .1400043   .0976573     1.43   0.152    -.0514004    .3314091
                    x93 |   .0734557   .0916967     0.80   0.423    -.1062665     .253178
                    x94 |  -.1435742   .0862727    -1.66   0.096    -.3126656    .0255172
                    x95 |  -.0212452   .0898768    -0.24   0.813    -.1974006    .1549102
                  _cons |    1.24872   .6712769     1.86   0.063    -.0669587    2.564399
-----------------------------------------------------------------------------------------
. di _b[POmean:0.treat]
3424.8791
. tebalance summarize

  Covariate balance summary
                                                   Raw     Weighted
                          -----------------------------------------
                          Number of obs =          500        500.0
                          Treated obs   =           92        249.5
                          Control obs   =          408        250.5
                          -----------------------------------------

  -----------------------------------------------------------------
                  |Standardized differences          Variance ratio
                  |        Raw    Weighted           Raw   Weighted
  ----------------+------------------------------------------------
               x1 |  -.6027752    .0041102      1.338962   1.000571
                  |
               x2 |
               1  |  -.1180374    .0011686      .4133173   1.011157
                  |
               x3 |
               1  |  -.1253201   -.0169419      .5085817   .8975379
                  |
               x4 |  -.1207472    .0136004      .9914484   1.003798
               x5 |  -.1944638     .003179      .8589874   .5855492
               x6 |  -.6542694    .0947099      .4958356   .5643304
               x7 |   .0473848    .0177567      1.160037   1.134687
              x90 |   .1499304    .0348222      .9289414    .817157
              x91 |  -.0833726   -.0675073      .8791918     .96061
              x92 |   .0662245   -.0005441      1.090179   1.148892
              x93 |   .0479737    -.020065      .8926169   .9606022
              x94 |  -.1521926    .0315996      .8686432   .7548902
              x95 |  -.0155155    .0398234      .8285405   .8815991
  -----------------------------------------------------------------
. tebalance summarize, baseline

  Covariate balance summary
                                                   Raw     Weighted
                          -----------------------------------------
                          Number of obs =          500        500.0
                          Treated obs   =           92        249.5
                          Control obs   =          408        250.5
                          -----------------------------------------

  -----------------------------------------------------------------
                  |           Means                  Variances     
                  |    Control     Treated       Control    Treated
  ----------------+------------------------------------------------
               x1 |        .75    .4673913      .1879607   .2516722
                  |
               x2 |
               1  |   .0269608    .0108696      .0262984   .0108696
                  |
               x3 |
               1  |   .0441176    .0217391      .0422749   .0215002
                  |
               x4 |    .495098    .4347826      .2505902   .2484472
               x5 |   26.56863    25.46739      34.50142   29.63629
               x6 |   13.15931    11.86957      5.195687   2.576206
               x7 |   6.696078    6.858696      10.90495   12.65014
              x90 |   -.048508    .0972024      .9792937   .9097065
              x91 |  -.0077434   -.0890157      1.011341   .8891627
              x92 |  -.0227801    .0453787      1.013567    1.10497
              x93 |   .0403853    .0865687      .9793358   .8741716
              x94 |   .0160559   -.1299173      .9846065   .8552718
              x95 |  -.0658282   -.0807251      1.008285   .8354051
  -----------------------------------------------------------------
. 
. psweight ipw `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance `depvaropt' ntable



initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.299227
        1.x2 |  -1.630011
        1.x3 |  -.4513747
          x4 |  -.3551908
          x5 |    .058452
          x6 |  -.2821621
          x7 |   .0332007
         x90 |   .1276777
         x91 |  -.0961158
         x92 |   .1400042
         x93 |   .0734557
         x94 |  -.1435742
         x95 |  -.0212453
       _cons |   1.248719
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
-------------------------------------------------------
                      | Treatment    Control      Total
----------------------+--------------------------------
       Number of rows |        92        408        500
Sum of sample weights |  180.1725   802.3793   982.5519
       Sum of weights |  180.1725   802.3793   982.5519
-------------------------------------------------------
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4574809  -.0062577  -.0125405   .4990018   1.002016
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0104612   .0009426   .0088532   .1064741   1.093783
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0241722  -.0001085   -.000706   .1536741   .9999315
             |
          x4 |  .4218861   .4314162  -.0095301  -.0192435   .4952368   .9986039
          x5 |  25.44699   25.25275   .1942355   .0358227   5.422129   .5945666
          x6 |  11.84757   11.67955     .16802   .1023308   1.641931   .5984286
          x7 |  7.015422   6.824197   .1912246   .0537838   3.555432   1.151353
         x90 |  .0839738   .0777469   .0062269   .0064883   .9597153   .8303563
         x91 | -.0648837   -.033852  -.0310317  -.0330613     .93861    .990382
         x92 |  .0575388    .048059   .0094797   .0091544    1.03554   1.130693
         x93 |  .1016523   .1032411  -.0015888  -.0016789   .9463749   1.031343
         x94 | -.1252265  -.1745685    .049342   .0539401   .9147554   .7439066
         x95 | -.1044649  -.1114622   .0069973   .0077149   .9069849   .8717686
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.01622
  Mean absolute standardized diff.    = 0.02656
  Maximum absolute standardized diff. = 0.10233
  C.V. of matching weights:           = 1.06192
  S.D. of matching weights:           = 1.05655
  Skewness of matching weights:       = 0.13011
  Kurtosis of matching weights:       = 0.03293
  Maximum matching weight:            = 9.03680
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |     3430.94     3424.879   6.060611   .0374489   3424.879
   y1_binary |    .9509319     .9506406   .0002912   .0058276   .9506406
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. psweight call reweight()
. psweight call balanceresults()
  Unmatched data
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4673913   .4653368   .0020545   .0040953   .5016695   1.009059
             |
          x2 |
          0  |  (empty)
          1  |  .0108696   .0107485   .0001211   .0011611   .1042572   1.019731
             |
          x3 |
          0  |  (empty)
          1  |  .0217391   .0242844  -.0025453  -.0173588   .1466296   .9051505
             |
          x4 |  .4347826   .4280334   .0067492   .0135405   .4984448   1.012313
          x5 |  25.46739   25.44732   .0200675   .0036862   5.443922   .5905162
          x6 |  11.86957   11.69122   .1783471   .1111158   1.605057   .5691173
          x7 |  6.858696   6.797654   .0610413   .0171623   3.556704   1.144312
         x90 |  .0972024   .0623017   .0349008   .0365918   .9537854   .8240885
         x91 | -.0890157   -.024932  -.0640836  -.0679605   .9429542   .9687584
         x92 |  .0453787   .0459298  -.0005511  -.0005243   1.051175   1.158638
         x93 |  .0865687   .1054548  -.0188861  -.0201997   .9349714   .9687504
         x94 | -.1299173  -.1613151   .0313978   .0339506   .9248091   .7612936
         x95 | -.0807251  -.1181964   .0374713   .0409968    .914005   .8890772
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.01202
  Mean absolute standardized diff.    = 0.02833
  Maximum absolute standardized diff. = 0.11112
  Weights equal 1
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3424.629     3419.183   5.446179   .0347585   3419.183
   y1_binary |    .9470976      .946147   .0009506   .0176755    .946147
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight ipw `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet averagevariance `depvaropt'



initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.299227
        1.x2 |  -1.630011
        1.x3 |  -.4513747
          x4 |  -.3551908
          x5 |    .058452
          x6 |  -.2821621
          x7 |   .0332007
         x90 |   .1276777
         x91 |  -.0961158
         x92 |   .1400042
         x93 |   .0734557
         x94 |  -.1435742
         x95 |  -.0212453
       _cons |   1.248719
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff     sd_avg  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4574809  -.0062577  -.0125468   .4987508   1.002016
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0104612   .0009426   .0090493   .1041668   1.093783
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0241722  -.0001085   -.000706   .1536767   .9999315
             |
          x4 |  .4218861   .4314162  -.0095301  -.0192368   .4954098   .9986039
          x5 |  25.44699   25.25275   .1942355   .0309352   6.278789   .5945666
          x6 |  11.84757   11.67955     .16802   .0885484   1.897493   .5984286
          x7 |  7.015422   6.824197   .1912246   .0556436     3.4366   1.151353
         x90 |  .0839738   .0777469   .0062269   .0061803   1.007542   .8303563
         x91 | -.0648837   -.033852  -.0310317  -.0329813    .940886    .990382
         x92 |  .0575388    .048059   .0094797    .009431   1.005171   1.130693
         x93 |  .1016523   .1032411  -.0015888  -.0016918   .9391571   1.031343
         x94 | -.1252265  -.1745685    .049342   .0498224   .9903584   .7439066
         x95 | -.1044649  -.1114622   .0069973   .0074459   .9397461   .8717686
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.01461
  Mean absolute standardized diff.    = 0.02494
  Maximum absolute standardized diff. = 0.08855
  C.V. of matching weights:           = 1.06192
  S.D. of matching weights:           = 1.05655
  Skewness of matching weights:       = 0.13011
  Kurtosis of matching weights:       = 0.03293
  Maximum matching weight:            = 9.03680
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |     3430.94     3424.879   6.060611   .0355365   3424.879
   y1_binary |    .9509319     .9506406   .0002912   .0056545   .9506406
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' [iw=`wgtvar'], ate aequations

Iteration 0:   EE criterion =  3.987e-18  
Iteration 1:   EE criterion =  2.429e-25  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATE                     |
                  treat |
(Treated vs Untreated)  |  -332.1348   56.53175    -5.88   0.000     -442.935   -221.3346
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
             Untreated  |   3453.029    20.1341   171.50   0.000     3413.567    3492.491
------------------------+----------------------------------------------------------------
TME1                    |
                     x1 |  -1.299227   .2371935    -5.48   0.000    -1.764118   -.8343367
                        |
                     x2 |
                     1  |  -1.630014    .746001    -2.19   0.029    -3.092149   -.1678787
                        |
                     x3 |
                     1  |  -.4513753   .5770312    -0.78   0.434    -1.582336    .6795851
                     x4 |  -.3551911    .204881    -1.73   0.083    -.7567506    .0463684
                     x5 |    .058452   .0195046     3.00   0.003     .0202237    .0966803
                     x6 |  -.2821622    .049775    -5.67   0.000    -.3797195    -.184605
                     x7 |   .0332008   .0279849     1.19   0.235    -.0216486    .0880501
                    x90 |   .1276778   .0907109     1.41   0.159    -.0501124     .305468
                    x91 |  -.0961159   .0916737    -1.05   0.294     -.275793    .0835612
                    x92 |   .1400043   .0976573     1.43   0.152    -.0514004    .3314091
                    x93 |   .0734557   .0916967     0.80   0.423    -.1062665     .253178
                    x94 |  -.1435742   .0862727    -1.66   0.096    -.3126656    .0255172
                    x95 |  -.0212452   .0898768    -0.24   0.813    -.1974006    .1549102
                  _cons |    1.24872   .6712769     1.86   0.063    -.0669587    2.564399
-----------------------------------------------------------------------------------------
. psweight ipw `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], ate treatvariance



initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.299227
        1.x2 |  -1.630011
        1.x3 |  -.4513747
          x4 |  -.3551908
          x5 |    .058452
          x6 |  -.2821621
          x7 |   .0332007
         x90 |   .1276777
         x91 |  -.0961158
         x92 |   .1400042
         x93 |   .0734557
         x94 |  -.1435742
         x95 |  -.0212453
       _cons |   1.248719
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .6613089   .6933653  -.0320565  -.0675465   .4745835   1.058036
             |
          x2 |
          0  |  (empty)
          1  |  .0128589   .0239773  -.0111184  -.0984109   .1129796   .5447509
             |
          x3 |
          0  |  (empty)
          1  |  .0265737   .0393435  -.0127698  -.0791771    .161282   .6873675
             |
          x4 |  .4958234   .4853443   .0104791   .0209007   .5013759   1.005121
          x5 |  25.79221   26.26742  -.4752186  -.0902562   5.265216   .7434191
          x6 |  12.37135   12.88246  -.5111087  -.2828654   1.806897   .6063943
          x7 |  6.760858   6.737452   .0234061   .0064602   3.623093   1.194134
         x90 |  -.108215   -.017539   -.090676  -.0848915   1.068141   1.121317
         x91 |  .0334119  -.0122333   .0456452   .0475293   .9603591   .9566022
         x92 |  .0165767  -.0117433     .02832   .0258227   1.096708   1.209921
         x93 |  .0109477   .0569505  -.0460028  -.0491777   .9354401   .9220024
         x94 | -.1467207  -.0286143  -.1181065  -.1303607   .9059973   .8106047
         x95 | -.0857581  -.0773517  -.0084064  -.0094125   .8931054   .7990227
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.06088
  Mean absolute standardized diff.    = 0.07637
  Maximum absolute standardized diff. = 0.28287
  C.V. of matching weights:           = 0.34039
  S.D. of matching weights:           = 0.34145
  Skewness of matching weights:       = 0.16246
  Kurtosis of matching weights:       = 0.06628
  Maximum matching weight:            = 4.72518
. 
. teffects ipw (`:word 1 of `depvarlist'') (`treatvar' `varlist') if `tousevar' [iw=`wgtvar'], atet aequations tlevel(0) control(1)

Iteration 0:   EE criterion =  3.987e-18  
Iteration 1:   EE criterion =  9.605e-26  

Treatment-effects estimation                    Number of obs     =        500
Estimator      : inverse-probability weights
Outcome model  : weighted mean
Treatment model: logit
-----------------------------------------------------------------------------------------
                        |               Robust
                     y1 |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
ATET                    |
                  treat |
(Untreated vs Treated)  |   321.4309   62.35166     5.16   0.000     199.2239    443.6379
------------------------+----------------------------------------------------------------
POmean                  |
                  treat |
               Treated  |   3138.003   59.50596    52.73   0.000     3021.374    3254.633
------------------------+----------------------------------------------------------------
TME0                    |
                     x1 |   1.299227   .2371935     5.48   0.000     .8343367    1.764118
                        |
                     x2 |
                     1  |   1.630014    .746001     2.19   0.029     .1678787    3.092149
                        |
                     x3 |
                     1  |   .4513753   .5770312     0.78   0.434    -.6795851    1.582336
                     x4 |   .3551911    .204881     1.73   0.083    -.0463684    .7567506
                     x5 |   -.058452   .0195046    -3.00   0.003    -.0966803   -.0202237
                     x6 |   .2821622    .049775     5.67   0.000      .184605    .3797195
                     x7 |  -.0332008   .0279849    -1.19   0.235    -.0880501    .0216486
                    x90 |  -.1276778   .0907109    -1.41   0.159     -.305468    .0501124
                    x91 |   .0961159   .0916737     1.05   0.294    -.0835612     .275793
                    x92 |  -.1400043   .0976573    -1.43   0.152    -.3314091    .0514004
                    x93 |  -.0734557   .0916967    -0.80   0.423     -.253178    .1062665
                    x94 |   .1435742   .0862727     1.66   0.096    -.0255172    .3126656
                    x95 |   .0212452   .0898768     0.24   0.813    -.1549102    .1974006
                  _cons |   -1.24872   .6712769    -1.86   0.063    -2.564399    .0669587
-----------------------------------------------------------------------------------------
. psweight ipw `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], ateu treatvariance `depvaropt'



initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = IPW
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.299227
        1.x2 |  -1.630011
        1.x3 |  -.4513747
          x4 |  -.3551908
          x5 |    .058452
          x6 |  -.2821621
          x7 |   .0332007
         x90 |   .1276777
         x91 |  -.0961158
         x92 |   .1400042
         x93 |   .0734557
         x94 |  -.1435742
         x95 |  -.0212453
       _cons |   1.248719
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. 
. // tradeoff between CBPS-like balance and variance in weights
. psweight cbps `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet  treatvariance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00001735  
Iteration 1:   f(p) =  6.450e-06  
Iteration 2:   f(p) =  5.892e-06  
Iteration 3:   f(p) =  5.889e-06  
Iteration 4:   f(p) =  5.889e-06  
Iteration 5:   f(p) =  5.884e-06  
Iteration 6:   f(p) =  5.782e-06  
Iteration 7:   f(p) =  1.671e-06  
Iteration 8:   f(p) =  1.353e-06  
Iteration 9:   f(p) =  1.347e-06  
Iteration 10:  f(p) =  1.347e-06  
Iteration 11:  f(p) =  1.345e-06  
Iteration 12:  f(p) =  1.278e-06  
Iteration 13:  f(p) =  7.536e-07  
Iteration 14:  f(p) =  4.028e-07  
Iteration 15:  f(p) =  3.959e-07  
Iteration 16:  f(p) =  3.959e-07  
Iteration 17:  f(p) =  3.950e-07  
Iteration 18:  f(p) =  3.836e-07  
Iteration 19:  f(p) =  2.750e-07  
Iteration 20:  f(p) =  7.890e-08  
Iteration 21:  f(p) =  7.812e-08  
Iteration 22:  f(p) =  7.812e-08  
Iteration 23:  f(p) =  7.809e-08  
Iteration 24:  f(p) =  2.232e-08  
Iteration 25:  f(p) =  1.288e-08  
Iteration 26:  f(p) =  1.287e-08  
Iteration 27:  f(p) =  1.287e-08  
Iteration 28:  f(p) =  1.283e-08  
Iteration 29:  f(p) =  1.212e-08  
Iteration 30:  f(p) =  6.221e-09  
Iteration 31:  f(p) =  3.039e-09  
Iteration 32:  f(p) =  2.965e-09  
Iteration 33:  f(p) =  2.965e-09  
Iteration 34:  f(p) =  2.961e-09  
Iteration 35:  f(p) =  2.870e-09  
Iteration 36:  f(p) =  2.107e-09  
Iteration 37:  f(p) =  7.386e-10  
Iteration 38:  f(p) =  6.667e-10  
Iteration 39:  f(p) =  6.665e-10  
Iteration 40:  f(p) =  6.664e-10  
Iteration 41:  f(p) =  6.635e-10  
Iteration 42:  f(p) =  6.060e-10  
Iteration 43:  f(p) =  3.009e-10  
Iteration 44:  f(p) =  2.190e-10  
Iteration 45:  f(p) =  2.181e-10  
Iteration 46:  f(p) =  2.181e-10  
Iteration 47:  f(p) =  2.181e-10  
Iteration 48:  f(p) =  2.176e-10  
Iteration 49:  f(p) =  2.008e-10  
Iteration 50:  f(p) =  8.725e-11  
Iteration 51:  f(p) =  5.177e-11  
Iteration 52:  f(p) =  5.109e-11  
Iteration 53:  f(p) =  5.109e-11  
Iteration 54:  f(p) =  5.108e-11  
Iteration 55:  f(p) =  5.080e-11  
Iteration 56:  f(p) =  4.319e-11  
Iteration 57:  f(p) =  7.492e-12  
Iteration 58:  f(p) =  1.164e-12  
Iteration 59:  f(p) =  1.133e-12  
Iteration 60:  f(p) =  1.133e-12  
Iteration 61:  f(p) =  1.132e-12  
Iteration 62:  f(p) =  1.123e-12  
Iteration 63:  f(p) =  6.692e-13  
Iteration 64:  f(p) =  1.708e-13  
Iteration 65:  f(p) =  1.512e-13  
Iteration 66:  f(p) =  1.511e-13  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (just identified)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.447067
        1.x2 |  -1.546866
        1.x3 |  -.4711119
          x4 |  -.3822617
          x5 |   .0635834
          x6 |  -.2432316
          x7 |    .047704
         x90 |   .1335012
         x91 |  -.1336148
         x92 |   .1522979
         x93 |   .0757708
         x94 |  -.1016183
         x95 |  -.0383404
       _cons |      .6266
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4512189   4.26e-06   8.55e-06   .4990018    1.00433
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0114041  -1.89e-07  -1.78e-06   .1064741   1.004312
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0240628   9.22e-07   6.00e-06   .1536741   1.004365
             |
          x4 |  .4218861   .4218849   1.21e-06   2.45e-06   .4952368   1.004329
          x5 |  25.44699   25.44697   .0000137   2.52e-06   5.422129   .6144636
          x6 |  11.84757   11.84755   .0000196   .0000119   1.641931   .5982538
          x7 |  7.015422    7.01543  -8.52e-06  -2.40e-06   3.555432   1.161762
         x90 |  .0839738   .0839754  -1.59e-06  -1.65e-06   .9597153   .8505311
         x91 | -.0648837  -.0648849   1.23e-06   1.31e-06     .93861   .9922921
         x92 |  .0575388   .0575408  -2.03e-06  -1.96e-06    1.03554   1.118264
         x93 |  .1016523   .1016503   2.03e-06   2.14e-06   .9463749   1.012574
         x94 | -.1252265  -.1252288   2.34e-06   2.56e-06   .9147554   .7576608
         x95 | -.1044649  -.1044664   1.41e-06   1.55e-06   .9069849   .8646446
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = 0.00000
  Mean absolute standardized diff.    = 0.00000
  Maximum absolute standardized diff. = 0.00001
  C.V. of matching weights:           = 1.03194
  S.D. of matching weights:           = 1.02713
  Skewness of matching weights:       = 0.11350
  Kurtosis of matching weights:       = 0.02292
  Maximum matching weight:            = 7.00792
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.367     3431.366   .0005904   3.71e-06   3431.366
   y1_binary |    .9509094     .9509091   2.71e-07   5.54e-06   .9509091
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight pcbps `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance cvtarget(1 .75 6) `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .00093832  
Iteration 1:   f(p) =  .00004631  
Iteration 2:   f(p) =  .00003859  
Iteration 3:   f(p) =  .00003858  
Iteration 4:   f(p) =  .00003858  
Iteration 5:   f(p) =  .00003857  
Iteration 6:   f(p) =  .00003713  
Iteration 7:   f(p) =  .00001556  
Iteration 8:   f(p) =  .00001516  
Iteration 9:   f(p) =  .00001516  
Iteration 10:  f(p) =  .00001516  
Iteration 11:  f(p) =  .00001516  
Iteration 12:  f(p) =  .00001504  
Iteration 13:  f(p) =  .00001407  
Iteration 14:  f(p) =  .00001321  
Iteration 15:  f(p) =  .00001318  
Iteration 16:  f(p) =  .00001318  
Iteration 17:  f(p) =  .00001318  
Iteration 18:  f(p) =  .00001318  
Iteration 19:  f(p) =  .00001318  
Iteration 20:  f(p) =  .00001314  
Iteration 21:  f(p) =  .00001281  
Iteration 22:  f(p) =  .00001268  
Iteration 23:  f(p) =  .00001268  
Iteration 24:  f(p) =  .00001268  
Iteration 25:  f(p) =  .00001268  
Iteration 26:  f(p) =  .00001267  
Iteration 27:  f(p) =  .00001262  
Iteration 28:  f(p) =   .0000125  
Iteration 29:  f(p) =   .0000125  
Iteration 30:  f(p) =   .0000125  
Iteration 31:  f(p) =   .0000125  
Iteration 32:  f(p) =   .0000125  
Iteration 33:  f(p) =   .0000125  
Iteration 34:  f(p) =  .00001249  
Iteration 35:  f(p) =  .00001247  
Iteration 36:  f(p) =  .00001247  
Iteration 37:  f(p) =  .00001247  
Iteration 38:  f(p) =  .00001247  
Iteration 39:  f(p) =  .00001247  
Iteration 40:  f(p) =  .00001247  
Iteration 41:  f(p) =  .00001247  
Iteration 42:  f(p) =  .00001247  
Iteration 43:  f(p) =  .00001247  
Iteration 44:  f(p) =  .00001247  
Iteration 45:  f(p) =  .00001247  
Iteration 46:  f(p) =  .00001247  
Iteration 47:  f(p) =  .00001247  
Iteration 48:  f(p) =  .00001247  
Iteration 49:  f(p) =  .00001247  
Iteration 50:  f(p) =  .00001247  
Iteration 51:  f(p) =  .00001247  
Iteration 52:  f(p) =  .00001247  
Iteration 53:  f(p) =  .00001247  
Iteration 54:  f(p) =  .00001246  
Iteration 55:  f(p) =  .00001246  
Iteration 56:  f(p) =  .00001246  
Iteration 57:  f(p) =  .00001246  
Iteration 58:  f(p) =  .00001246  
Iteration 59:  f(p) =  .00001246  
Iteration 60:  f(p) =  .00001246  
Iteration 61:  f(p) =  .00001246  
Iteration 62:  f(p) =  .00001246  
Iteration 63:  f(p) =  .00001246  
Iteration 64:  f(p) =  .00001246  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_cv()-.75)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.254181
        1.x2 |  -1.322945
        1.x3 |  -.3737861
          x4 |  -.3150734
          x5 |    .053865
          x6 |   -.207347
          x7 |   .0392197
         x90 |   .1112074
         x91 |  -.1096079
         x92 |   .1251035
         x93 |   .0659519
         x94 |    -.09382
         x95 |   -.029129
       _cons |   .4369064
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4880522  -.0368291  -.0738055   .4990018   .9953384
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0133716  -.0019677  -.0184807   .1064741   .8582425
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0267065  -.0026428  -.0171974   .1536741   .9073997
             |
          x4 |  .4218861   .4355797  -.0136936  -.0276506   .4952368   .9963546
          x5 |  25.44699   25.52567  -.0786885  -.0145125   5.422129   .6374814
          x6 |  11.84757    12.0082   -.160628  -.0978287   1.641931   .5789038
          x7 |  7.015422    6.96308   .0523413   .0147215   3.555432   1.157512
         x90 |  .0839738   .0663453   .0176285   .0183685   .9597153   .8599203
         x91 | -.0648837  -.0552227   -.009661  -.0102929     .93861   .9716611
         x92 |  .0575388   .0443218   .0132169   .0127633    1.03554   1.110882
         x93 |  .1016523   .0920433    .009609   .0101535   .9463749   .9946047
         x94 | -.1252265  -.1096388  -.0155876  -.0170402   .9147554    .770958
         x95 | -.1044649  -.0986899  -.0057751  -.0063673   .9069849   .8554811
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.01747
  Mean absolute standardized diff.    = 0.02609
  Maximum absolute standardized diff. = 0.09783
  C.V. of matching weights:           = 0.86705
  S.D. of matching weights:           = 0.86355
  Skewness of matching weights:       = 0.09623
  Kurtosis of matching weights:       = 0.01774
  Maximum matching weight:            = 5.51314
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.705     3436.509  -4.803833  -.0312799   3436.509
   y1_binary |    .9509266     .9524272  -.0015006  -.0323357   .9524272
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight pcbps `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance cvtarget(1 .50 6) `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -435.82146  
Iteration 2:   f(p) =  -411.2833  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
Iteration 0:   f(p) =  .03149776  
Iteration 1:   f(p) =  .00028651  
Iteration 2:   f(p) =  .00020393  
Iteration 3:   f(p) =  .00019258  
Iteration 4:   f(p) =  .00019213  
Iteration 5:   f(p) =  .00019201  
Iteration 6:   f(p) =  .00019201  
Iteration 7:   f(p) =  .00019103  
Iteration 8:   f(p) =  .00015728  
Iteration 9:   f(p) =  .00012562  
Iteration 10:  f(p) =  .00012401  
Iteration 11:  f(p) =  .00012369  
Iteration 12:  f(p) =  .00012357  
Iteration 13:  f(p) =  .00012356  
Iteration 14:  f(p) =  .00012356  
Iteration 15:  f(p) =  .00012354  
Iteration 16:  f(p) =   .0001232  
Iteration 17:  f(p) =  .00010489  
Iteration 18:  f(p) =  .00008442  
Iteration 19:  f(p) =  .00008166  
Iteration 20:  f(p) =  .00008117  
Iteration 21:  f(p) =  .00008114  
Iteration 22:  f(p) =  .00008114  
Iteration 23:  f(p) =  .00008114  
Iteration 24:  f(p) =  .00008114  
Iteration 25:  f(p) =  .00008109  
Iteration 26:  f(p) =  .00008022  
Iteration 27:  f(p) =  .00007994  
Iteration 28:  f(p) =  .00007994  
Iteration 29:  f(p) =  .00007994  
Iteration 30:  f(p) =  .00007994  
Iteration 31:  f(p) =  .00007989  
Iteration 32:  f(p) =  .00007971  
Iteration 33:  f(p) =  .00007971  
Iteration 34:  f(p) =  .00007971  
Iteration 35:  f(p) =  .00007971  
Iteration 36:  f(p) =  .00007971  
Iteration 37:  f(p) =   .0000797  
Iteration 38:  f(p) =  .00007968  
Iteration 39:  f(p) =  .00007968  
Iteration 40:  f(p) =  .00007968  
Iteration 41:  f(p) =  .00007968  
Iteration 42:  f(p) =  .00007968  
Iteration 43:  f(p) =  .00007967  
Iteration 44:  f(p) =  .00007967  
Iteration 45:  f(p) =  .00007967  
Iteration 46:  f(p) =  .00007967  
Iteration 47:  f(p) =  .00007967  
Iteration 48:  f(p) =  .00007967  
Iteration 49:  f(p) =  .00007967  
Iteration 50:  f(p) =  .00007967  
Iteration 51:  f(p) =  .00007967  
Iteration 52:  f(p) =  .00007967  
Iteration 53:  f(p) =  .00007967  
Iteration 54:  f(p) =  .00007967  
Iteration 55:  f(p) =  .00007967  
Iteration 56:  f(p) =  .00007967  
Iteration 57:  f(p) =  .00007967  
Iteration 58:  f(p) =  .00007967  
Iteration 59:  f(p) =  .00007967  
Iteration 60:  f(p) =  .00007967  
Iteration 61:  f(p) =  .00007967  
Iteration 62:  f(p) =  .00007967  
Iteration 63:  f(p) =  .00007967  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = CBPS (just identified) + 1*abs(wgt_cv()-.5)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -.9697349
        1.x2 |  -1.009948
        1.x3 |  -.2681191
          x4 |  -.2328723
          x5 |   .0401949
          x6 |  -.1592826
          x7 |   .0284828
         x90 |   .0826327
         x91 |  -.0793657
         x92 |   .0918013
         x93 |   .0506792
         x94 |  -.0790893
         x95 |  -.0177968
       _cons |   .1432515
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .5455565  -.0943333  -.1890441   .4990018   1.003097
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0163288  -.0049249  -.0462543   .1064741   .7049259
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0302591  -.0061954  -.0403152   .1536741   .8037994
             |
          x4 |  .4218861   .4518912  -.0300051  -.0605875   .4952368   .9889709
          x5 |  25.44699   25.68607  -.2390887   -.044095   5.422129   .6743964
          x6 |  11.84757   12.24705  -.3994827  -.2433006   1.641931   .5553463
          x7 |  7.015422    6.89603   .1193915     .03358   3.555432   1.154005
         x90 |  .0839738   .0421685   .0418053   .0435601   .9597153   .8752326
         x91 | -.0648837  -.0430192  -.0218645  -.0232946     .93861   .9459255
         x92 |  .0575388   .0282771   .0292616   .0282573    1.03554   1.101599
         x93 |  .1016523   .0789374   .0227149    .024002   .9463749   .9718368
         x94 | -.1252265  -.0859457  -.0392808  -.0429413   .9147554   .7889919
         x95 | -.1044649  -.0909645  -.0135004  -.0148849   .9069849   .8447606
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.04426
  Mean absolute standardized diff.    = 0.06416
  Maximum absolute standardized diff. = 0.24330
  C.V. of matching weights:           = 0.64863
  S.D. of matching weights:           = 0.64659
  Skewness of matching weights:       = 0.07527
  Kurtosis of matching weights:       = 0.01274
  Maximum matching weight:            = 3.88354
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3433.335     3443.147  -9.811939  -.0672131   3443.147
   y1_binary |     .950974     .9546103  -.0036363  -.0831634   .9546103
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance cvtarget(1 .75 6) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .00118406  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .00047826  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .00006974  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00004509  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  9.894e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  2.962e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  1.695e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  6.548e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  2.890e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  1.307e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  8.557e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  7.609e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =  6.395e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =  6.152e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  6.114e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  6.091e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  6.081e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  5.967e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  2.004e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  9.537e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  3.919e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  1.022e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 22:  f(p) =  7.409e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 23:  f(p) =  3.313e-14  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 24:  f(p) =  3.454e-17  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = mean(stddiff())^2 + 1*abs(wgt_cv()-.75)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.229243
        1.x2 |   -1.62977
        1.x3 |  -.4531173
          x4 |   -.328979
          x5 |   .0276181
          x6 |  -.0890137
          x7 |  -.0390881
         x90 |    .044543
         x91 |  -.1198612
         x92 |   .0663481
         x93 |   .0071154
         x94 |   -.106518
         x95 |  -.0492385
       _cons |   1.257201
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .4987448  -.0475217  -.0952335   .4990018   .9947763
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0096343   .0017696   .0166198   .1064741   1.186674
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0221962   .0018675   .0121523   .1536741   1.086748
             |
          x4 |  .4218861   .4539707  -.0320846  -.0647863   .4952368   .9881899
          x5 |  25.44699    25.2526   .1943807   .0358495   5.422129   .7141106
          x6 |  11.84757   12.35308  -.5055134  -.3078774   1.641931   .5462925
          x7 |  7.015422   6.166948   .8484733   .2386414   3.555432   1.134319
         x90 |  .0839738   .0286106   .0553632   .0576871   .9597153   .8433812
         x91 | -.0648837  -.0815226   .0166389   .0177272     .93861   .9583521
         x92 |  .0575388   .0415986   .0159401   .0153931    1.03554   1.091288
         x93 |  .1016523   .0544405   .0472119   .0498871   .9463749   .9852235
         x94 | -.1252265  -.1404646   .0152382   .0166582   .9147554   .7899197
         x95 | -.1044649  -.1110691   .0066041   .0072814   .9069849    .855503
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.07198
  Maximum absolute standardized diff. = 0.30788
  C.V. of matching weights:           = 0.75159
  S.D. of matching weights:           = 0.74950
  Skewness of matching weights:       = 0.09266
  Kurtosis of matching weights:       = 0.01669
  Maximum matching weight:            = 4.51593
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3436.811     3461.548  -24.73702  -.1674962   3461.548
   y1_binary |    .9518332     .9638247  -.0119915  -.3052814   .9638247
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance cvtarget(1 .50 6) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .03174348  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .01880677  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .01499015  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00460013  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =   .0008868  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  .00069867  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =  .00016283  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  .00008027  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  .00004971  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 9:   f(p) =  .00003906  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 10:  f(p) =  .00003724  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 11:  f(p) =  .00002756  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 12:  f(p) =  .00001186  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 13:  f(p) =  8.543e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 14:  f(p) =  7.185e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 15:  f(p) =  7.096e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 16:  f(p) =  6.874e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 17:  f(p) =  6.338e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 18:  f(p) =  1.326e-06  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 19:  f(p) =  3.750e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 20:  f(p) =  2.979e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 21:  f(p) =  2.015e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 22:  f(p) =  1.263e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 23:  f(p) =  1.083e-07  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 24:  f(p) =  9.891e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 25:  f(p) =  9.465e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 26:  f(p) =  9.171e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 27:  f(p) =  9.159e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 28:  f(p) =  9.093e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 29:  f(p) =  9.035e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 30:  f(p) =  9.028e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 31:  f(p) =  9.007e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 32:  f(p) =  8.587e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 33:  f(p) =  4.784e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 34:  f(p) =  1.634e-08  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 35:  f(p) =  7.015e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 36:  f(p) =  2.075e-09  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 37:  f(p) =  8.844e-10  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 38:  f(p) =  9.309e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 39:  f(p) =  5.922e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 40:  f(p) =  3.021e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 41:  f(p) =  1.245e-11  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 42:  f(p) =  4.202e-12  

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = mean(stddiff())^2 + 1*abs(wgt_cv()-.5)^6)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -.5654888
        1.x2 |  -1.629757
        1.x3 |  -.4713323
          x4 |  -.2108979
          x5 |  -.0067217
          x6 |  -.0315857
          x7 |   -.026869
         x90 |  -.1394797
         x91 |  -.1508994
         x92 |  -.1787651
         x93 |  -.1100809
         x94 |  -.0619526
         x95 |  -.1841029
       _cons |   1.248011
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231   .6291779  -.1779548  -.3566215   .4990018   1.065918
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0075353   .0038686   .0363333   .1064741   1.514016
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0213919   .0026718   .0173863   .1536741   1.126683
             |
          x4 |  .4218861   .5001668  -.0782807  -.1580673   .4952368   .9798153
          x5 |  25.44699   25.44672   .0002618   .0000483   5.422129   .7942462
          x6 |  11.84757   12.66038  -.8128061  -.4950307   1.641931   .5227302
          x7 |  7.015422   6.448678    .566744   .1594023   3.555432    1.12076
         x90 |  .0839738  -.1401356   .2241094   .2335165   .9597153   .8856989
         x91 | -.0648837  -.1245971   .0597134    .063619     .93861   .9534848
         x92 |  .0575388  -.1948634   .2524021   .2437395    1.03554   1.085887
         x93 |  .1016523  -.0556913   .1573436   .1662593   .9463749   .8888591
         x94 | -.1252265  -.0807562  -.0444702  -.0486143   .9147554   .8231344
         x95 | -.1044649  -.2296495   .1251845   .1380227   .9069849   .8442389
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.00000
  Mean absolute standardized diff.    = 0.16282
  Maximum absolute standardized diff. = 0.49503
  C.V. of matching weights:           = 0.51257
  S.D. of matching weights:           = 0.51185
  Skewness of matching weights:       = 0.06605
  Kurtosis of matching weights:       = 0.01324
  Maximum matching weight:            = 3.18982
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3447.539     3476.127  -28.58754  -.1771767   3476.127
   y1_binary |    .9516637     .9613794  -.0097157  -.2339655   .9613794
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. 
. // you can also target skiwness, kurtosis, or max weight, but it's finicky
. 
. capture nois {
. psweight mean_sd_sq `treatvar' `varlist' if `tousevar' [iw=`wgtvar'], atet treatvariance maxtarget(1 10 2) difficult nonrtolerance `depvaropt'



  Step 1 (initial values from logit model):
initial:       f(p) = -681.05307
alternative:   f(p) =  -555.8915
rescale:       f(p) = -485.05844
Iteration 0:   f(p) = -485.05844  
Iteration 1:   f(p) = -436.32795  
Iteration 2:   f(p) = -411.28763  
Iteration 3:   f(p) = -411.19869  
Iteration 4:   f(p) = -411.19865  
  
  Step 2 (CBPS) :
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 0:   f(p) =  .92802102  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 1:   f(p) =  .08140018  (backed up)
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 2:   f(p) =  .01131189  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 3:   f(p) =  .00394572  (backed up)
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 4:   f(p) =  .00136808  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 5:   f(p) =  .00126312  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 6:   f(p) =   .0001903  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 7:   f(p) =  .00011936  
numerical derivatives are approximate
flat or discontinuous region encountered
Iteration 8:   f(p) =  .00011936  (backed up)

Propensity score model coefficients                Number of obs  =        983
Propensity score reweigting
Loss = mean(stddiff())^2 + 1*abs(wgt_max()-10)^2)
------------------------------------------------------------------------------
       treat |      Coef.
-------------+----------------------------------------------------------------
          x1 |  -1.298892
        1.x2 |  -1.630297
        1.x3 |  -.4516324
          x4 |  -.3600911
          x5 |   .0772195
          x6 |  -.2349774
          x7 |   .0010931
         x90 |   .1163575
         x91 |   -.093943
         x92 |   .1279471
         x93 |    .059896
         x94 |  -.1205901
         x95 |  -.0225393
       _cons |   1.216817
------------------------------------------------------------------------------
New variables created: _weight _weight_mtch _pscore _treated 
  
. psweight call balanceresults()
  Balance:
-------------------------------------------------------------------------------
             |    mean_T     mean_C       diff   std_diff       sd_T  var_ratio
-------------+-----------------------------------------------------------------
          x1 |  .4512231    .515743  -.0645199  -.1292979   .4990018   .9957572
             |
          x2 |
          0  |  (empty)
          1  |  .0114039   .0097815   .0016224   .0152372   .1064741   1.168988
             |
          x3 |
          0  |  (empty)
          1  |  .0240637   .0243261  -.0002624  -.0017074   .1536741   .9937624
             |
          x4 |  .4218861   .3913181    .030568    .061724   .4952368   1.028404
          x5 |  25.44699   26.43366  -.9866736  -.1819716   5.422129   .5974808
          x6 |  11.84757   11.97767  -.1301036  -.0792382   1.641931   .5662015
          x7 |  7.015422   6.532102   .4833201   .1359385   3.555432   1.134873
         x90 |  .0839738   .0361985   .0477754   .0497808   .9597153   .8589835
         x91 | -.0648837  -.0320816  -.0328021  -.0349476     .93861   .9762136
         x92 |  .0575388   .0641904  -.0066516  -.0064233    1.03554   1.122769
         x93 |  .1016523   .1064885  -.0048362  -.0051103   .9463749   1.015929
         x94 | -.1252265  -.1598659   .0346395   .0378675   .9147554   .7229905
         x95 | -.1044649  -.1032903  -.0011746  -.0012951   .9069849    .869879
-------------------------------------------------------------------------------
  
  Mean standardized diff.             = -0.01073
  Mean absolute standardized diff.    = 0.05696
  Maximum absolute standardized diff. = 0.18197
  C.V. of matching weights:           = 0.99267
  S.D. of matching weights:           = 0.99293
  Skewness of matching weights:       = 0.16058
  Kurtosis of matching weights:       = 0.05247
  Maximum matching weight:            = 10.00207
  
  Prognostic scores:
------------------------------------------------------------------------
             | mean_yhat_T  mean_yhat_C       diff   std_diff   mean_y_C
-------------+----------------------------------------------------------
          y1 |    3431.808     3449.037  -17.22864  -.1080196   3449.037
   y1_binary |    .9508481     .9581946  -.0073465  -.1599469   .9581946
------------------------------------------------------------------------
  Note: The std_diff column does not account for the standard error of the linear predictions.
. }
. 
. log close psweight_example_ado
      name:  psweight_example_ado
       log:  C:\Users\kkranker\Documents\Stata\psweight\code-psweight\psweight_example_ado.log
  log type:  text
 closed on:   5 Nov 2019, 22:34:16
----------------------------------------------------------------------------------------------------------------------------------------------------------------
